{"ast":null,"code":"import _objectSpread from\"C:/Users/Silvia/WebstormProjects/TASK/task-manager/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// task-manager/frontend/src/Rental.jsx\nimport{API_URL}from'./config/api';import React,{useState,useEffect,useCallback,useMemo}from'react';import axios from'axios';import{Plus,Edit2,Trash2,Calendar,DollarSign,Package,User,Clock,Search,Filter,X,AlertCircle,CheckCircle,ArrowRight,Key,Home,Phone,Mail,MapPin,CreditCard,FileText,Shield,RotateCcw,AlertTriangle,Eye,Archive,TrendingUp,Hash,Camera,ChevronLeft,ChevronRight,Download,RefreshCw}from'lucide-react';import'./Rental.css';// ConfiguraciÃ³n de categorÃ­as y estados\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CATEGORIES={herramientas:{label:'Mesas'},construccion:{label:'NÃºmeros'},jardineria:{label:'Sillas'},otros:{label:'Otros',icon:'ðŸ“¦'}};const STATUS_CONFIG={disponible:{label:'Disponible',color:'#10b981',bgColor:'#d1fae5'},agotado:{label:'Agotado',color:'#ef4444',bgColor:'#fee2e2'},alquilado:{label:'Alquilado',color:'#f59e0b',bgColor:'#fef3c7'},mantenimiento:{label:'Mantenimiento',color:'#6b7280',bgColor:'#f3f4f6'}};// Componente de NotificaciÃ³n\nconst Notification=_ref=>{let{message,type='success',onClose}=_ref;useEffect(()=>{const timer=setTimeout(onClose,3000);return()=>clearTimeout(timer);},[onClose]);const colors={success:'#10b981',error:'#ef4444',warning:'#f59e0b',info:'#3b82f6'};return/*#__PURE__*/_jsxs(\"div\",{className:\"notification\",style:{background:colors[type]},children:[/*#__PURE__*/_jsx(\"span\",{children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"notification-close\",children:/*#__PURE__*/_jsx(X,{size:16})})]});};// Componente principal\nfunction Rental(_ref2){let{updateTabData}=_ref2;// Estados principales\nconst[items,setItems]=useState([]);const[rentals,setRentals]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[notification,setNotification]=useState(null);// Estados de vista y filtros\nconst[currentView,setCurrentView]=useState('items');const[searchTerm,setSearchTerm]=useState('');const[filterCategory,setFilterCategory]=useState('all');const[filterStatus,setFilterStatus]=useState('all');const[sortBy,setSortBy]=useState('name');const[sortOrder,setSortOrder]=useState('asc');// Estados de modales\nconst[modals,setModals]=useState({item:false,rental:false,return:false,payment:false,details:false});// Estados de formularios\nconst[editingItem,setEditingItem]=useState(null);const[selectedItem,setSelectedItem]=useState(null);const[selectedRental,setSelectedRental]=useState(null);const[payments,setPayments]=useState([]);// Estado del formulario de artÃ­culo\nconst[itemForm,setItemForm]=useState({name:'',description:'',category:'herramientas',quantity:1,rental_price:0,image_url:''});// Estado del formulario de alquiler\nconst[rentalForm,setRentalForm]=useState({customer_name:'',customer_id_number:'',customer_address:'',customer_phone:'',customer_email:'',rental_start:new Date().toISOString().split('T')[0],rental_end:'',quantity_rented:1,has_collateral:false,collateral_description:'',total_amount:0,initial_deposit:0,notes:'',items:[{item_id:'',quantity_rented:1}]});const addItem=()=>{setRentalForm(f=>_objectSpread(_objectSpread({},f),{},{items:[...f.items,{item_id:'',quantity_rented:1}]}));};const updateItem=(index,field,value)=>{const items=[...rentalForm.items];items[index][field]=value;setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{items}));};const removeItem=index=>{setRentalForm(f=>_objectSpread(_objectSpread({},f),{},{items:f.items.filter((_,i)=>i!==index)}));};const handleSubmit=async()=>{try{await axios.post(\"\".concat(API_URL,\"/rentals/enhanced\"),rentalForm);alert(\"âœ… Alquiler creado correctamente\");// Reset\nsetRentalForm({customer_name:'',customer_id_number:'',customer_address:'',customer_phone:'',customer_email:'',rental_start:'',rental_end:'',deposit:0,has_collateral:false,collateral_description:'',notes:'',items:[{item_id:'',quantity_rented:1}]});}catch(error){console.error(error);alert(\"âŒ Error al crear alquiler\");}};// Estado del formulario de devoluciÃ³n\nconst[returnForm,setReturnForm]=useState({condition:'bueno',notes:'',final_payment:0});// Estado del formulario de pago\nconst[paymentForm,setPaymentForm]=useState({amount:0,payment_method:'efectivo',notes:''});// Estados de subida de imagen\nconst[imageFile,setImageFile]=useState(null);const[imagePreview,setImagePreview]=useState('');const[uploadingImage,setUploadingImage]=useState(false);// EstadÃ­sticas computadas\nconst stats=useMemo(()=>{// Calcular totales de items\nconst totalItems=items.length;const totalUnits=items.reduce((sum,item)=>{return sum+(parseInt(item.quantity_total)||0);},0);const availableUnits=items.reduce((sum,item)=>{return sum+(parseInt(item.quantity_available)||0);},0);// Calcular unidades alquiladas correctamente\nconst rentedUnits=Math.max(0,totalUnits-availableUnits);// Calcular alquileres activos\nconst activeRentals=rentals.filter(r=>r.status==='activo');const today=new Date();const overdueRentals=activeRentals.filter(r=>{const endDate=new Date(r.rental_end);return endDate<today;});return{totalItems,totalUnits,availableUnits,rentedUnits,// Siempre serÃ¡ >= 0\nactiveRentals:activeRentals.length,overdueRentals:overdueRentals.length};},[items,rentals]);// Cargar datos iniciales\nuseEffect(()=>{loadInitialData();},[]);// Actualizar badge de pendientes\nuseEffect(()=>{if(updateTabData){updateTabData({notification:stats.overdueRentals>0?stats.overdueRentals:null});}},[stats.overdueRentals]);// Funciones de carga de datos\nconst loadInitialData=async()=>{setLoading(true);try{await Promise.all([fetchItems(),fetchRentals()]);}catch(error){showNotification('Error al cargar datos','error');}finally{setLoading(false);}};const fetchItems=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/rental-items/enhanced\"));setItems(response.data);}catch(error){console.error('Error fetching items:',error);setError('Error al cargar artÃ­culos');}};const fetchRentals=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/rentals/enhanced\"));setRentals(response.data);}catch(error){console.error('Error fetching rentals:',error);setError('Error al cargar alquileres');}};const fetchPayments=async rentalId=>{if(!rentalId){console.error('No rental ID provided');setPayments([]);// Establecer array vacÃ­o si no hay ID\nreturn;}try{const response=await axios.get(\"\".concat(API_URL,\"/rentals/\").concat(rentalId,\"/payments\"));// Asegurar que siempre sea un array\nsetPayments(Array.isArray(response.data)?response.data:[]);}catch(error){console.error('Error fetching payments:',error);setPayments([]);// En caso de error, establecer array vacÃ­o\nshowNotification('Error al cargar los abonos','error');}};// Funciones de filtrado y ordenamiento\nconst getFilteredItems=useCallback(()=>{let filtered=[...items];// BÃºsqueda\nif(searchTerm){const search=searchTerm.toLowerCase();filtered=filtered.filter(item=>{var _item$name,_item$description;return((_item$name=item.name)===null||_item$name===void 0?void 0:_item$name.toLowerCase().includes(search))||((_item$description=item.description)===null||_item$description===void 0?void 0:_item$description.toLowerCase().includes(search));});}// Filtro por categorÃ­a\nif(filterCategory!=='all'){filtered=filtered.filter(item=>item.category===filterCategory);}// Filtro por estado\nif(filterStatus!=='all'){if(filterStatus==='disponible'){filtered=filtered.filter(item=>item.quantity_available>0);}else if(filterStatus==='agotado'){filtered=filtered.filter(item=>item.quantity_available===0);}}// Ordenamiento\nfiltered.sort((a,b)=>{let valueA=a[sortBy];let valueB=b[sortBy];if(typeof valueA==='string'){var _valueB;valueA=valueA.toLowerCase();valueB=((_valueB=valueB)===null||_valueB===void 0?void 0:_valueB.toLowerCase())||'';}if(sortOrder==='asc'){return valueA>valueB?1:-1;}else{return valueA<valueB?1:-1;}});return filtered;},[items,searchTerm,filterCategory,filterStatus,sortBy,sortOrder]);const getActiveRentals=useCallback(()=>{return rentals.filter(r=>r.status==='activo');},[rentals]);const getPendingReturns=useCallback(()=>{const today=new Date();return rentals.filter(r=>{if(r.status!=='activo')return false;const endDate=new Date(r.rental_end);return endDate<=today;});},[rentals]);// CÃ¡lculo de precio de alquiler\nconst calculateRentalPrice=useCallback(()=>{if(!selectedItem||!rentalForm.rental_start||!rentalForm.rental_end){return 0;}const start=new Date(rentalForm.rental_start);const end=new Date(rentalForm.rental_end);const days=Math.ceil((end-start)/(1000*60*60*24))+1;const price=selectedItem.rental_price||selectedItem.daily_rate||0;const quantity=rentalForm.quantity_rented||1;return price*days*quantity;},[selectedItem,rentalForm.rental_start,rentalForm.rental_end,rentalForm.quantity_rented]);// Actualizar precio automÃ¡ticamente\nuseEffect(()=>{if(selectedItem){const price=calculateRentalPrice();setRentalForm(prev=>_objectSpread(_objectSpread({},prev),{},{total_amount:price}));}},[selectedItem,calculateRentalPrice]);// FunciÃ³n para subir la imagen al servidor\nconst handleImageUpload=async file=>{if(!file)return;// Validar que sea PNG\nif(!file.type.includes('png')){showNotification('Solo se permiten imÃ¡genes PNG','error');return;}// Validar tamaÃ±o (mÃ¡ximo 2MB)\nif(file.size>2*1024*1024){showNotification('La imagen no debe superar 2MB','error');return;}setUploadingImage(true);try{const formData=new FormData();formData.append('image',file);const response=await axios.post(\"\".concat(API_URL.replace('/api',''),\"/api/upload/image\"),formData,{headers:{'Content-Type':'multipart/form-data'}});const imageUrl=response.data.url;setItemForm(_objectSpread(_objectSpread({},itemForm),{},{image_url:imageUrl}));setImagePreview(imageUrl);showNotification('Imagen subida exitosamente','success');}catch(error){console.error('Error al subir imagen:',error);showNotification('Error al subir la imagen','error');}finally{setUploadingImage(false);}};// FunciÃ³n para eliminar la imagen\nconst handleRemoveImage=()=>{setImageFile(null);setImagePreview('');setItemForm(_objectSpread(_objectSpread({},itemForm),{},{image_url:''}));};// Manejadores de modales\nconst openModal=function(modalName){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;setModals(prev=>_objectSpread(_objectSpread({},prev),{},{[modalName]:true}));if(modalName==='item'){if(data){setEditingItem(data);setItemForm({name:data.name||'',description:data.description||'',category:data.category||'herramientas',quantity:data.quantity_total||1,rental_price:data.daily_rate||0,image_url:data.image_url||''});// Establecer preview si hay imagen existente\nsetImagePreview(data.image_url||'');}else{setEditingItem(null);setItemForm({name:'',description:'',category:'herramientas',quantity:1,rental_price:0,image_url:''});setImagePreview('');setImageFile(null);}}else if(modalName==='rental'&&data){setSelectedItem(data);setRentalForm(prev=>_objectSpread(_objectSpread({},prev),{},{items:[{item_id:data.id,quantity_rented:1}]}));}else if(modalName==='return'&&data){setSelectedRental(data);}else if(modalName==='payment'&&data){setSelectedRental(data);fetchPayments(data.id);}};const closeModal=modalName=>{setModals(prev=>_objectSpread(_objectSpread({},prev),{},{[modalName]:false}));if(modalName==='item'){setEditingItem(null);setItemForm({name:'',description:'',category:'herramientas',quantity:1,rental_price:0,image_url:''});setImagePreview('');setImageFile(null);}else if(modalName==='rental'){setSelectedItem(null);setRentalForm({item_id:'',customer_name:'',customer_id_number:'',customer_address:'',customer_phone:'',customer_email:'',rental_start:new Date().toISOString().split('T')[0],rental_end:'',quantity_rented:1,has_collateral:false,collateral_description:'',total_amount:0,initial_deposit:0,notes:''});}};// Manejadores de formularios\nconst handleItemSubmit=async e=>{e.preventDefault();setLoading(true);try{// Preparar los datos con la estructura correcta que espera el backend\nconst itemData={name:itemForm.name,description:itemForm.description||'',category:itemForm.category,daily_rate:parseFloat(itemForm.rental_price)||0,weekly_rate:(parseFloat(itemForm.rental_price)||0)*6,monthly_rate:(parseFloat(itemForm.rental_price)||0)*25,quantity_total:parseInt(itemForm.quantity)||1,quantity_available:parseInt(itemForm.quantity)||1,status:'disponible',image_url:itemForm.image_url||''};if(editingItem){// Al editar, mantener la cantidad disponible actual\nconst currentItem=items.find(item=>item.id===editingItem.id);if(currentItem){// Calcular la diferencia para mantener la proporciÃ³n correcta\nconst rentedQuantity=currentItem.quantity_total-currentItem.quantity_available;itemData.quantity_available=Math.max(0,itemData.quantity_total-rentedQuantity);}await axios.put(\"\".concat(API_URL,\"/rental-items/\").concat(editingItem.id),itemData);showNotification('ArtÃ­culo actualizado exitosamente');}else{// Crear nuevo artÃ­culo\nawait axios.post(\"\".concat(API_URL,\"/rental-items\"),itemData);showNotification('ArtÃ­culo creado exitosamente');}await fetchItems();closeModal('item');}catch(error){var _error$response,_error$response$data;console.error('Error:',error);const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error al guardar el artÃ­culo';showNotification(errorMessage,'error');}finally{setLoading(false);}};// Busca la funciÃ³n handleRentalSubmit en tu Rental.jsx y reemplÃ¡zala con esta versiÃ³n corregida:\nconst handleRentalSubmit=async e=>{e.preventDefault();setLoading(true);try{var _rentalForm$customer_,_rentalForm$customer_2;// Validar artÃ­culos (que haya al menos 1 y que cada uno tenga item_id y cantidad > 0)\nif(!rentalForm.items||rentalForm.items.length===0||rentalForm.items.some(it=>!it.item_id||it.quantity_rented<=0)){showNotification('Seleccione al menos un artÃ­culo vÃ¡lido y cantidad mayor a cero','error');setLoading(false);return;}// Validar datos de cliente y fechas\nif(!rentalForm.customer_name.trim()||!rentalForm.customer_id_number.trim()||!rentalForm.customer_phone.trim()){showNotification('Complete los datos obligatorios del cliente','error');setLoading(false);return;}if(!rentalForm.rental_start||!rentalForm.rental_end){showNotification('Seleccione las fechas de inicio y fin del alquiler','error');setLoading(false);return;}if(new Date(rentalForm.rental_end)<=new Date(rentalForm.rental_start)){showNotification('La fecha de devoluciÃ³n debe ser posterior a la fecha de alquiler','error');setLoading(false);return;}// Preparar payload para enviar al backend\nconst payload={items:rentalForm.items.map(it=>({item_id:Number(it.item_id),quantity_rented:Number(it.quantity_rented)})),customer_name:rentalForm.customer_name.trim(),customer_id_number:rentalForm.customer_id_number.trim(),customer_phone:rentalForm.customer_phone.trim(),customer_address:((_rentalForm$customer_=rentalForm.customer_address)===null||_rentalForm$customer_===void 0?void 0:_rentalForm$customer_.trim())||'',customer_email:((_rentalForm$customer_2=rentalForm.customer_email)===null||_rentalForm$customer_2===void 0?void 0:_rentalForm$customer_2.trim())||'',rental_start:rentalForm.rental_start,rental_end:rentalForm.rental_end,deposit:Number(rentalForm.deposit)||0,has_collateral:rentalForm.has_collateral,collateral_description:rentalForm.collateral_description||'',notes:rentalForm.notes||''};// Enviar a la ruta mÃºltiple\nconst response=await axios.post(\"\".concat(API_URL,\"/rentals/enhanced\"),payload);// Ã‰xito\nshowNotification('Alquiler creado exitosamente','success');await fetchItems();await fetchRentals();// Reset del formulario\nsetRentalForm({customer_name:'',customer_id_number:'',customer_address:'',customer_phone:'',customer_email:'',rental_start:new Date().toISOString().split('T')[0],rental_end:'',deposit:0,has_collateral:false,collateral_description:'',notes:'',items:[{item_id:'',quantity_rented:1}]});closeModal('rental');}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error al crear alquiler:',error);const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Error al crear alquiler mÃºltiple';showNotification(message,'error');}finally{setLoading(false);}};const handleReturnSubmit=async e=>{e.preventDefault();setLoading(true);try{await axios.patch(\"\".concat(API_URL,\"/rentals/\").concat(selectedRental.id,\"/return\"),{condition_notes:returnForm.notes,return_condition:returnForm.condition});// Si hay pago final, registrarlo\nif(returnForm.final_payment>0){await axios.post(\"\".concat(API_URL,\"/rentals/\").concat(selectedRental.id,\"/payments\"),{amount:returnForm.final_payment,payment_method:'efectivo',notes:'Pago al devolver'});}showNotification('DevoluciÃ³n registrada exitosamente');await Promise.all([fetchItems(),fetchRentals()]);closeModal('return');}catch(error){console.error('Error:',error);showNotification('Error al registrar devoluciÃ³n','error');}finally{setLoading(false);}};const handlePaymentSubmit=async e=>{e.preventDefault();if(!selectedRental||!selectedRental.id){showNotification('Error: No se ha seleccionado un alquiler','error');return;}setLoading(true);try{const response=await axios.post(\"\".concat(API_URL,\"/rentals/\").concat(selectedRental.id,\"/payments\"),paymentForm);showNotification('Abono registrado exitosamente','success');// Recargar los pagos\nawait fetchPayments(selectedRental.id);// Limpiar el formulario\nsetPaymentForm({amount:0,payment_method:'efectivo',notes:''});// Actualizar la lista de alquileres\nawait fetchRentals();}catch(error){var _error$response4,_error$response4$data;console.error('Error:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Error al registrar abono';showNotification(errorMessage,'error');}finally{setLoading(false);}};const handleDeleteItem=async id=>{// Buscar el artÃ­culo para mostrar su nombre en la confirmaciÃ³n\nconst item=items.find(i=>i.id===id);const itemName=item?item.name:'este artÃ­culo';if(!window.confirm(\"\\xBFEst\\xE1 seguro de eliminar \\\"\".concat(itemName,\"\\\"?\\n\\nEsta acci\\xF3n no se puede deshacer.\"))){return;}setLoading(true);try{const response=await axios.delete(\"\".concat(API_URL,\"/rental-items/\").concat(id));// Mostrar mensaje de Ã©xito con detalles si estÃ¡n disponibles\nif(response.data&&response.data.stats){const{payments_deleted,rentals_deleted}=response.data.stats;let message='ArtÃ­culo eliminado exitosamente';if(rentals_deleted>0||payments_deleted>0){message+=\". Se eliminaron \".concat(rentals_deleted,\" alquiler(es) hist\\xF3rico(s) y \").concat(payments_deleted,\" pago(s) asociado(s).\");}showNotification(message,'success');}else{showNotification('ArtÃ­culo eliminado exitosamente','success');}// Recargar la lista de artÃ­culos\nawait fetchItems();}catch(error){console.error('Error al eliminar:',error);// Manejar diferentes tipos de errores\nlet errorMessage='Error al eliminar el artÃ­culo';if(error.response){if(error.response.status===400){// Error de validaciÃ³n (artÃ­culo tiene alquileres activos)\nerrorMessage=error.response.data.error||'No se puede eliminar: El artÃ­culo estÃ¡ en uso';}else if(error.response.status===404){errorMessage='El artÃ­culo no fue encontrado';}else if(error.response.status===500){// Error del servidor\nerrorMessage=error.response.data.error||'Error interno del servidor';// Si hay detalles adicionales en desarrollo\nif(error.response.data.details){console.error('Detalles del error:',error.response.data.details);}}}else if(error.request){errorMessage='No se pudo conectar con el servidor';}// Mostrar notificaciÃ³n de error\nshowNotification(errorMessage,'error');// Si el error indica que hay alquileres activos, ofrecer mÃ¡s informaciÃ³n\nif(errorMessage.includes('alquiler')&&errorMessage.includes('activo')){// Opcionalmente, mostrar una lista de los alquileres activos\nconst activeRentalsForItem=rentals.filter(r=>r.item_id===id&&r.status==='activo');if(activeRentalsForItem.length>0){console.log('Alquileres activos que impiden la eliminaciÃ³n:');activeRentalsForItem.forEach(rental=>{console.log(\"- Cliente: \".concat(rental.customer_name,\", Fecha fin: \").concat(formatDate(rental.rental_end)));});}}}finally{setLoading(false);}};const handleDeletePayment=async paymentId=>{if(!window.confirm('Â¿EstÃ¡ seguro de eliminar este abono?'))return;try{await axios.delete(\"\".concat(API_URL,\"/rental-payments/\").concat(paymentId));showNotification('Abono eliminado');await fetchPayments(selectedRental.id);}catch(error){showNotification('Error al eliminar abono','error');}};// FunciÃ³n para mostrar notificaciones\nconst showNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({message,type});};// FunciÃ³n para formatear fecha\nconst formatDate=date=>{if(!date)return'';const options={day:'2-digit',month:'short',year:'numeric'};return new Date(date).toLocaleDateString('es-ES',options);};// FunciÃ³n para calcular dÃ­as vencidos\nconst getDaysOverdue=endDate=>{const today=new Date();const end=new Date(endDate);const diff=Math.floor((today-end)/(1000*60*60*24));return diff>0?diff:0;};// Renderizado del componente\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"rental-container\",children:[notification&&/*#__PURE__*/_jsx(Notification,{message:notification.message,type:notification.type,onClose:()=>setNotification(null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-top\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"Gesti\\xF3n de Alquileres\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>openModal('item'),children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Nuevo Art\\xEDculo\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-warning\",onClick:()=>{setSelectedItem(null);openModal('rental');},children:[/*#__PURE__*/_jsx(Key,{size:20}),\"Nuevo Alquiler\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:loadInitialData,disabled:loading,children:/*#__PURE__*/_jsx(RefreshCw,{size:20,className:loading?'spinning':''})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(Search,{size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar art\\xEDculos...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"clear-search\",onClick:()=>setSearchTerm(''),children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"filter-select\",value:filterCategory,onChange:e=>setFilterCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todas las categor\\xEDas\"}),Object.entries(CATEGORIES).map(_ref3=>{let[key,cat]=_ref3;return/*#__PURE__*/_jsxs(\"option\",{value:key,children:[cat.icon,\" \",cat.label]},key);})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"filter-select\",value:filterStatus,onChange:e=>setFilterStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todos los estados\"}),/*#__PURE__*/_jsx(\"option\",{value:\"disponible\",children:\"\\u2705 Disponibles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"agotado\",children:\"\\u274C Agotados\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"view-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(currentView==='items'?'active':''),onClick:()=>setCurrentView('items'),children:[/*#__PURE__*/_jsx(Package,{size:16}),\"Art\\xEDculos\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(currentView==='rentals'?'active':''),onClick:()=>setCurrentView('rentals'),children:[/*#__PURE__*/_jsx(Key,{size:16}),\"Alquilados\",stats.activeRentals>0&&/*#__PURE__*/_jsx(\"span\",{className:\"badge\",children:stats.activeRentals})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(currentView==='pending'?'active':''),onClick:()=>setCurrentView('pending'),children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),\"Pendientes\",stats.overdueRentals>0&&/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-danger\",children:stats.overdueRentals})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon yellow\",children:/*#__PURE__*/_jsx(Package,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalItems}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Art\\xEDculos\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon green\",children:/*#__PURE__*/_jsx(CheckCircle,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.availableUnits}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Disponibles\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon blue\",children:/*#__PURE__*/_jsx(Key,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.rentedUnits}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Alquilados\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon red\",children:/*#__PURE__*/_jsx(AlertTriangle,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.overdueRentals}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Vencidos\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-content\",children:[loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-overlay\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"})]}),currentView==='items'&&/*#__PURE__*/_jsx(\"div\",{className:\"items-grid\",children:getFilteredItems().length>0?getFilteredItems().map(item=>{var _CATEGORIES$item$cate;return/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-image\",children:[item.image_url?/*#__PURE__*/_jsx(\"img\",{src:item.image_url,alt:item.name}):/*#__PURE__*/_jsx(\"div\",{className:\"no-image\",children:/*#__PURE__*/_jsx(Package,{size:48})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-quantity-badge\",children:[/*#__PURE__*/_jsx(Hash,{size:14}),item.quantity_available||0,\"/\",item.quantity_total||0]}),/*#__PURE__*/_jsx(\"div\",{className:\"item-category-badge\",children:(_CATEGORIES$item$cate=CATEGORIES[item.category])===null||_CATEGORIES$item$cate===void 0?void 0:_CATEGORIES$item$cate.icon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"item-name\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"item-description\",children:item.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[/*#__PURE__*/_jsx(DollarSign,{size:16}),\"$\",item.daily_rate||0,\"/d\\xEDa\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"item-status\",style:{background:item.quantity_available>0?STATUS_CONFIG.disponible.bgColor:STATUS_CONFIG.agotado.bgColor,color:item.quantity_available>0?STATUS_CONFIG.disponible.color:STATUS_CONFIG.agotado.color},children:item.quantity_available>0?\"\".concat(item.quantity_available,\" disponibles\"):'Agotado'}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-rent\",onClick:()=>openModal('rental',item),disabled:item.quantity_available===0,children:[/*#__PURE__*/_jsx(Key,{size:14}),\"Alquilar\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-edit\",onClick:()=>openModal('item',item),children:/*#__PURE__*/_jsx(Edit2,{size:14})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-delete\",onClick:()=>handleDeleteItem(item.id),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]})]},item.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Package,{size:64}),/*#__PURE__*/_jsx(\"h3\",{children:\"No se encontraron art\\xEDculos\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Comienza agregando tu primer art\\xEDculo\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>openModal('item'),children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Agregar Art\\xEDculo\"]})]})}),currentView==='rentals'&&/*#__PURE__*/_jsx(\"div\",{className:\"rentals-list\",children:getActiveRentals().length>0?getActiveRentals().map(rental=>/*#__PURE__*/_jsxs(\"div\",{className:\"rental-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rental-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rental-customer\",children:[/*#__PURE__*/_jsx(User,{size:20}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:rental.customer_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"customer-details\",children:[rental.customer_id_number,\" \\u2022 \",rental.customer_phone]})]})]}),rental.has_collateral&&/*#__PURE__*/_jsxs(\"div\",{className:\"collateral-badge\",children:[/*#__PURE__*/_jsx(Shield,{size:14}),\"Con Prenda\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-item-info\",children:[/*#__PURE__*/_jsx(Package,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:rental.item_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"quantity\",children:[\"x\",rental.quantity_rented]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-dates\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date-item\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"date-label\",children:\"Inicio\"}),/*#__PURE__*/_jsx(\"span\",{className:\"date-value\",children:formatDate(rental.rental_start)})]})]}),/*#__PURE__*/_jsx(ArrowRight,{size:16}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-item\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"date-label\",children:\"Devoluci\\xF3n\"}),/*#__PURE__*/_jsx(\"span\",{className:\"date-value\",children:formatDate(rental.rental_end)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-payment-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"payment-label\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"payment-value\",children:[\"$\",rental.total_amount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"payment-label\",children:\"Abonado\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"payment-value text-green\",children:[\"$\",rental.total_paid||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"payment-label\",children:\"Saldo\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"payment-value text-orange\",children:[\"$\",(rental.total_amount-(rental.total_paid||0)).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success\",onClick:()=>openModal('return',rental),children:[/*#__PURE__*/_jsx(RotateCcw,{size:14}),\"Devolver\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-warning\",onClick:()=>openModal('payment',rental),children:[/*#__PURE__*/_jsx(DollarSign,{size:14}),\"Abonos\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setSelectedRental(rental);openModal('details');},children:[/*#__PURE__*/_jsx(Eye,{size:14}),\"Detalles\"]})]})]},rental.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Key,{size:64}),/*#__PURE__*/_jsx(\"h3\",{children:\"No hay art\\xEDculos alquilados\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Los alquileres activos aparecer\\xE1n aqu\\xED\"})]})}),currentView==='pending'&&/*#__PURE__*/_jsx(\"div\",{className:\"rentals-list\",children:getPendingReturns().length>0?getPendingReturns().map(rental=>{const daysOverdue=getDaysOverdue(rental.rental_end);return/*#__PURE__*/_jsxs(\"div\",{className:\"rental-card overdue\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-indicator\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:16}),daysOverdue,\" d\\xEDas vencido\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"rental-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rental-customer\",children:[/*#__PURE__*/_jsx(User,{size:20}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:rental.customer_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"customer-details\",children:[\"\\uD83D\\uDCF1 \",rental.customer_phone]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-item-info\",children:[/*#__PURE__*/_jsx(Package,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:rental.item_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overdue-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Debi\\xF3 devolver:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:formatDate(rental.rental_end)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Saldo pendiente:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"info-value text-orange\",children:[\"$\",(rental.total_amount-(rental.total_paid||0)).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success\",onClick:()=>openModal('return',rental),children:[/*#__PURE__*/_jsx(RotateCcw,{size:14}),\"Registrar Devoluci\\xF3n\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>window.location.href=\"tel:\".concat(rental.customer_phone),children:[/*#__PURE__*/_jsx(Phone,{size:14}),\"Contactar\"]})]})]},rental.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:64,color:\"#10b981\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No hay devoluciones pendientes\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\xA1Todos los alquileres est\\xE1n al d\\xEDa!\"})]})})]}),modals.item&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>closeModal('item'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingItem?'Editar ArtÃ­culo':'Nuevo ArtÃ­culo'}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>closeModal('item'),children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleItemSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre del art\\xEDculo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:itemForm.name,onChange:e=>setItemForm(_objectSpread(_objectSpread({},itemForm),{},{name:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",value:itemForm.category,onChange:e=>setItemForm(_objectSpread(_objectSpread({},itemForm),{},{category:e.target.value})),children:Object.entries(CATEGORIES).map(_ref4=>{let[key,cat]=_ref4;return/*#__PURE__*/_jsxs(\"option\",{value:key,children:[cat.icon,\" \",cat.label]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:itemForm.quantity,onChange:e=>setItemForm(_objectSpread(_objectSpread({},itemForm),{},{quantity:parseInt(e.target.value)})),min:\"1\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Precio de alquiler (por d\\xEDa)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:itemForm.rental_price,onChange:e=>setItemForm(_objectSpread(_objectSpread({},itemForm),{},{rental_price:parseFloat(e.target.value)})),step:\"0.01\",min:\"0\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:itemForm.description,onChange:e=>setItemForm(_objectSpread(_objectSpread({},itemForm),{},{description:e.target.value})),rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Imagen del art\\xEDculo (PNG)\"}),(imagePreview||itemForm.image_url)&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview||itemForm.image_url,alt:\"Preview\",className:\"image-preview\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-image-btn\",onClick:handleRemoveImage,title:\"Eliminar imagen\",children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image-upload\",accept:\"image/png\",onChange:e=>{const file=e.target.files[0];if(file){setImageFile(file);handleImageUpload(file);}},style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image-upload\",className:\"upload-image-btn \".concat(uploadingImage?'uploading':''),children:uploadingImage?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-small\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Subiendo...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Camera,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:imagePreview||itemForm.image_url?'Cambiar imagen':'Subir imagen PNG'})]})}),/*#__PURE__*/_jsx(\"small\",{className:\"form-help\",children:\"Solo archivos PNG. Tama\\xF1o m\\xE1ximo: 2MB\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>closeModal('item'),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Guardando...':'Guardar'})]})]})]})}),modals.rental&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:e=>{if(e.target.className==='modal-overlay')closeModal('rental');},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content rental-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nuevo Alquiler\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>closeModal('rental'),type:\"button\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRentalSubmit,className:\"rental-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Datos del Cliente\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nombre Completo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:rentalForm.customer_name,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{customer_name:e.target.value})),required:true,placeholder:\"Ej: Juan P\\xE9rez\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"C\\xE9dula/RUC *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:rentalForm.customer_id_number,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{customer_id_number:e.target.value})),required:true,placeholder:\"Ej: 0912345678\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tel\\xE9fono *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:rentalForm.customer_phone,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{customer_phone:e.target.value})),required:true,placeholder:\"Ej: 0991234567\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:rentalForm.customer_email,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{customer_email:e.target.value})),placeholder:\"correo@ejemplo.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:rentalForm.customer_address,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{customer_address:e.target.value})),rows:\"2\",placeholder:\"Direcci\\xF3n completa del cliente\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Art\\xEDculos a Alquilar\"}),rentalForm.items.map((item,index)=>{var _items$find;return/*#__PURE__*/_jsxs(\"div\",{className:\"item-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group flex-grow\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Art\\xEDculo *\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.item_id,onChange:e=>{const newItems=[...rentalForm.items];newItems[index].item_id=e.target.value;setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{items:newItems}));},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar art\\xEDculo...\"}),items.filter(i=>i.quantity_available>0).map(i=>/*#__PURE__*/_jsxs(\"option\",{value:i.id,children:[i.name,\" - Disponible: \",i.quantity_available]},i.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{width:'120px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cantidad *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:item.item_id?((_items$find=items.find(i=>i.id===parseInt(item.item_id)))===null||_items$find===void 0?void 0:_items$find.quantity_available)||1:999,value:item.quantity_rented,onChange:e=>{const newItems=[...rentalForm.items];newItems[index].quantity_rented=parseInt(e.target.value)||1;setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{items:newItems}));},required:true})]}),rentalForm.items.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-item-btn\",onClick:()=>{const newItems=rentalForm.items.filter((_,i)=>i!==index);setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{items:newItems}));},children:/*#__PURE__*/_jsx(Trash2,{size:20})})]},index);}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"add-item-btn\",onClick:()=>{setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{items:[...rentalForm.items,{item_id:'',quantity_rented:1}]}));},children:[/*#__PURE__*/_jsx(Plus,{size:20}),\" Agregar otro art\\xEDculo\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Detalles del Alquiler\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha Inicio *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:rentalForm.rental_start,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{rental_start:e.target.value})),required:true,min:new Date().toISOString().split('T')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha Devoluci\\xF3n *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:rentalForm.rental_end,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{rental_end:e.target.value})),required:true,min:rentalForm.rental_start||new Date().toISOString().split('T')[0]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dep\\xF3sito ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:rentalForm.deposit,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{deposit:parseFloat(e.target.value)||0})),placeholder:\"0.00\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:rentalForm.has_collateral,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{has_collateral:e.target.checked,collateral_description:e.target.checked?rentalForm.collateral_description:''}))}),/*#__PURE__*/_jsx(\"span\",{children:\"Tiene Garant\\xEDa\"})]})})]}),rentalForm.has_collateral&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n de la Garant\\xEDa\"}),/*#__PURE__*/_jsx(\"textarea\",{value:rentalForm.collateral_description,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{collateral_description:e.target.value})),rows:\"2\",placeholder:\"Describa la garant\\xEDa dejada por el cliente\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notas Adicionales\"}),/*#__PURE__*/_jsx(\"textarea\",{value:rentalForm.notes,onChange:e=>setRentalForm(_objectSpread(_objectSpread({},rentalForm),{},{notes:e.target.value})),rows:\"3\",placeholder:\"Observaciones o condiciones especiales\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>closeModal('rental'),disabled:loading,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Creando...':'Crear Alquiler'})]})]})]})}),modals.return&&selectedRental&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>closeModal('return'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registrar Devoluci\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>closeModal('return'),children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleReturnSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rental-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedRental.item_name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cliente: \",selectedRental.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Per\\xEDodo: \",formatDate(selectedRental.rental_start),\" - \",formatDate(selectedRental.rental_end)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Estado del art\\xEDculo\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:returnForm.condition,onChange:e=>setReturnForm(_objectSpread(_objectSpread({},returnForm),{},{condition:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"bueno\",children:\"Bueno\"}),/*#__PURE__*/_jsx(\"option\",{value:\"regular\",children:\"Regular\"}),/*#__PURE__*/_jsx(\"option\",{value:\"da\\xF1ado\",children:\"Da\\xF1ado\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notas sobre el estado\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:returnForm.notes,onChange:e=>setReturnForm(_objectSpread(_objectSpread({},returnForm),{},{notes:e.target.value})),rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total del alquiler:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount\",children:[\"$\",selectedRental.total_amount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Abonado:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount text-green\",children:[\"$\",selectedRental.total_paid||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Saldo pendiente:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount text-orange\",children:[\"$\",(selectedRental.total_amount-(selectedRental.total_paid||0)).toFixed(2)]})]})]}),selectedRental.total_amount-(selectedRental.total_paid||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pago final\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:returnForm.final_payment,onChange:e=>setReturnForm(_objectSpread(_objectSpread({},returnForm),{},{final_payment:parseFloat(e.target.value)})),step:\"0.01\",min:\"0\",max:selectedRental.total_amount-(selectedRental.total_paid||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>closeModal('return'),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Procesando...':'Confirmar DevoluciÃ³n'})]})]})]})}),modals.payment&&selectedRental&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>closeModal('payment'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gesti\\xF3n de Abonos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>closeModal('payment'),children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rental-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedRental.item_name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cliente: \",selectedRental.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total del alquiler: $\",selectedRental.total_amount||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payments-list\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Abonos realizados\"}),Array.isArray(payments)&&payments.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"payments-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Monto\"}),/*#__PURE__*/_jsx(\"th\",{children:\"M\\xE9todo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notas\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:payments.map(payment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(payment.payment_date)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",payment.amount]}),/*#__PURE__*/_jsx(\"td\",{children:payment.payment_method}),/*#__PURE__*/_jsx(\"td\",{children:payment.notes||'-'})]},payment.id))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No hay abonos registrados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total del alquiler:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount\",children:[\"$\",selectedRental.total_amount||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total abonado:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount\",children:[\"$\",Array.isArray(payments)?payments.reduce((sum,p)=>sum+(parseFloat(p.amount)||0),0).toFixed(2):'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Saldo pendiente:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"amount\",children:[\"$\",((parseFloat(selectedRental.total_amount)||0)-(Array.isArray(payments)?payments.reduce((sum,p)=>sum+(parseFloat(p.amount)||0),0):0)).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePaymentSubmit,className:\"payment-form\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Registrar nuevo abono\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Monto del abono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:paymentForm.amount,onChange:e=>setPaymentForm(_objectSpread(_objectSpread({},paymentForm),{},{amount:parseFloat(e.target.value)||0})),step:\"0.01\",min:\"0.01\",max:(parseFloat(selectedRental.total_amount)||0)-(Array.isArray(payments)?payments.reduce((sum,p)=>sum+(parseFloat(p.amount)||0),0):0),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\xE9todo de pago\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:paymentForm.payment_method,onChange:e=>setPaymentForm(_objectSpread(_objectSpread({},paymentForm),{},{payment_method:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"efectivo\",children:\"Efectivo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transferencia\",children:\"Transferencia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tarjeta\",children:\"Tarjeta\"}),/*#__PURE__*/_jsx(\"option\",{value:\"otro\",children:\"Otro\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notas (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:paymentForm.notes,onChange:e=>setPaymentForm(_objectSpread(_objectSpread({},paymentForm),{},{notes:e.target.value})),rows:\"2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>closeModal('payment'),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading||!paymentForm.amount,children:loading?'Registrando...':'Registrar Abono'})]})]})]})})]});}export default Rental;","map":{"version":3,"names":["API_URL","React","useState","useEffect","useCallback","useMemo","axios","Plus","Edit2","Trash2","Calendar","DollarSign","Package","User","Clock","Search","Filter","X","AlertCircle","CheckCircle","ArrowRight","Key","Home","Phone","Mail","MapPin","CreditCard","FileText","Shield","RotateCcw","AlertTriangle","Eye","Archive","TrendingUp","Hash","Camera","ChevronLeft","ChevronRight","Download","RefreshCw","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CATEGORIES","herramientas","label","construccion","jardineria","otros","icon","STATUS_CONFIG","disponible","color","bgColor","agotado","alquilado","mantenimiento","Notification","_ref","message","type","onClose","timer","setTimeout","clearTimeout","colors","success","error","warning","info","className","style","background","children","onClick","size","Rental","_ref2","updateTabData","items","setItems","rentals","setRentals","loading","setLoading","setError","notification","setNotification","currentView","setCurrentView","searchTerm","setSearchTerm","filterCategory","setFilterCategory","filterStatus","setFilterStatus","sortBy","setSortBy","sortOrder","setSortOrder","modals","setModals","item","rental","return","payment","details","editingItem","setEditingItem","selectedItem","setSelectedItem","selectedRental","setSelectedRental","payments","setPayments","itemForm","setItemForm","name","description","category","quantity","rental_price","image_url","rentalForm","setRentalForm","customer_name","customer_id_number","customer_address","customer_phone","customer_email","rental_start","Date","toISOString","split","rental_end","quantity_rented","has_collateral","collateral_description","total_amount","initial_deposit","notes","item_id","addItem","f","_objectSpread","updateItem","index","field","value","removeItem","filter","_","i","handleSubmit","post","concat","alert","deposit","console","returnForm","setReturnForm","condition","final_payment","paymentForm","setPaymentForm","amount","payment_method","imageFile","setImageFile","imagePreview","setImagePreview","uploadingImage","setUploadingImage","stats","totalItems","length","totalUnits","reduce","sum","parseInt","quantity_total","availableUnits","quantity_available","rentedUnits","Math","max","activeRentals","r","status","today","overdueRentals","endDate","loadInitialData","Promise","all","fetchItems","fetchRentals","showNotification","response","get","data","fetchPayments","rentalId","Array","isArray","getFilteredItems","filtered","search","toLowerCase","_item$name","_item$description","includes","sort","a","b","valueA","valueB","_valueB","getActiveRentals","getPendingReturns","calculateRentalPrice","start","end","days","ceil","price","daily_rate","prev","handleImageUpload","file","formData","FormData","append","replace","headers","imageUrl","url","handleRemoveImage","openModal","modalName","arguments","undefined","id","closeModal","handleItemSubmit","e","preventDefault","itemData","parseFloat","weekly_rate","monthly_rate","currentItem","find","rentedQuantity","put","_error$response","_error$response$data","errorMessage","handleRentalSubmit","_rentalForm$customer_","_rentalForm$customer_2","some","it","trim","payload","map","Number","_error$response2","_error$response2$data","_error$response3","_error$response3$data","handleReturnSubmit","patch","condition_notes","return_condition","handlePaymentSubmit","_error$response4","_error$response4$data","handleDeleteItem","itemName","window","confirm","delete","payments_deleted","rentals_deleted","request","activeRentalsForItem","log","forEach","formatDate","handleDeletePayment","paymentId","date","options","day","month","year","toLocaleDateString","getDaysOverdue","diff","floor","disabled","placeholder","onChange","target","Object","entries","_ref3","key","cat","_CATEGORIES$item$cate","src","alt","item_name","total_paid","toFixed","daysOverdue","location","href","stopPropagation","onSubmit","required","_ref4","min","step","rows","title","accept","files","display","htmlFor","_items$find","newItems","width","checked","payment_date","p"],"sources":["C:/Users/Silvia/WebstormProjects/TASK/task-manager/frontend/src/Rental.jsx"],"sourcesContent":["// task-manager/frontend/src/Rental.jsx\r\nimport { API_URL } from './config/api';\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    Plus, Edit2, Trash2, Calendar, DollarSign,\r\n    Package, User, Clock, Search, Filter,\r\n    X, AlertCircle, CheckCircle, ArrowRight,\r\n    Key, Home, Phone, Mail, MapPin, CreditCard,\r\n    FileText, Shield, RotateCcw, AlertTriangle,\r\n    Eye, Archive, TrendingUp, Hash, Camera,\r\n    ChevronLeft, ChevronRight, Download, RefreshCw\r\n} from 'lucide-react';\r\nimport './Rental.css';\r\n\r\n\r\n\r\n// ConfiguraciÃ³n de categorÃ­as y estados\r\nconst CATEGORIES = {\r\n    herramientas: { label: 'Mesas'},\r\n    construccion: { label: 'NÃºmeros'},\r\n    jardineria: { label: 'Sillas' },\r\n    otros: { label: 'Otros', icon: 'ðŸ“¦' }\r\n};\r\n\r\nconst STATUS_CONFIG = {\r\n    disponible: { label: 'Disponible', color: '#10b981', bgColor: '#d1fae5' },\r\n    agotado: { label: 'Agotado', color: '#ef4444', bgColor: '#fee2e2' },\r\n    alquilado: { label: 'Alquilado', color: '#f59e0b', bgColor: '#fef3c7' },\r\n    mantenimiento: { label: 'Mantenimiento', color: '#6b7280', bgColor: '#f3f4f6' }\r\n};\r\n\r\n// Componente de NotificaciÃ³n\r\nconst Notification = ({ message, type = 'success', onClose }) => {\r\n    useEffect(() => {\r\n        const timer = setTimeout(onClose, 3000);\r\n        return () => clearTimeout(timer);\r\n    }, [onClose]);\r\n\r\n    const colors = {\r\n        success: '#10b981',\r\n        error: '#ef4444',\r\n        warning: '#f59e0b',\r\n        info: '#3b82f6'\r\n    };\r\n\r\n    return (\r\n        <div className=\"notification\" style={{ background: colors[type] }}>\r\n            <span>{message}</span>\r\n            <button onClick={onClose} className=\"notification-close\">\r\n                <X size={16} />\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente principal\r\nfunction Rental({ updateTabData }) {\r\n    // Estados principales\r\n    const [items, setItems] = useState([]);\r\n    const [rentals, setRentals] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [notification, setNotification] = useState(null);\r\n\r\n    // Estados de vista y filtros\r\n    const [currentView, setCurrentView] = useState('items');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [filterCategory, setFilterCategory] = useState('all');\r\n    const [filterStatus, setFilterStatus] = useState('all');\r\n    const [sortBy, setSortBy] = useState('name');\r\n    const [sortOrder, setSortOrder] = useState('asc');\r\n\r\n    // Estados de modales\r\n    const [modals, setModals] = useState({\r\n        item: false,\r\n        rental: false,\r\n        return: false,\r\n        payment: false,\r\n        details: false\r\n    });\r\n\r\n    // Estados de formularios\r\n    const [editingItem, setEditingItem] = useState(null);\r\n    const [selectedItem, setSelectedItem] = useState(null);\r\n    const [selectedRental, setSelectedRental] = useState(null);\r\n    const [payments, setPayments] = useState([]);\r\n\r\n    // Estado del formulario de artÃ­culo\r\n    const [itemForm, setItemForm] = useState({\r\n        name: '',\r\n        description: '',\r\n        category: 'herramientas',\r\n        quantity: 1,\r\n        rental_price: 0,\r\n        image_url: ''\r\n    });\r\n\r\n    // Estado del formulario de alquiler\r\n    const [rentalForm, setRentalForm] = useState({\r\n\r\n        customer_name: '',\r\n        customer_id_number: '',\r\n        customer_address: '',\r\n        customer_phone: '',\r\n        customer_email: '',\r\n        rental_start: new Date().toISOString().split('T')[0],\r\n        rental_end: '',\r\n        quantity_rented: 1,\r\n        has_collateral: false,\r\n        collateral_description: '',\r\n        total_amount: 0,\r\n        initial_deposit: 0,\r\n        notes: '',\r\n        items: [{ item_id: '', quantity_rented: 1 }]\r\n    });\r\n\r\n    const addItem = () => {\r\n        setRentalForm(f => ({\r\n            ...f,\r\n            items: [...f.items, { item_id: '', quantity_rented: 1 }]\r\n        }));\r\n    };\r\n\r\n    const updateItem = (index, field, value) => {\r\n        const items = [...rentalForm.items];\r\n        items[index][field] = value;\r\n        setRentalForm({ ...rentalForm, items });\r\n    };\r\n\r\n    const removeItem = (index) => {\r\n        setRentalForm(f => ({\r\n            ...f,\r\n            items: f.items.filter((_, i) => i !== index)\r\n        }));\r\n    };\r\n\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            await axios.post(`${API_URL}/rentals/enhanced`, rentalForm);\r\n            alert(\"âœ… Alquiler creado correctamente\");\r\n            // Reset\r\n            setRentalForm({\r\n                customer_name: '',\r\n                customer_id_number: '',\r\n                customer_address: '',\r\n                customer_phone: '',\r\n                customer_email: '',\r\n                rental_start: '',\r\n                rental_end: '',\r\n                deposit: 0,\r\n                has_collateral: false,\r\n                collateral_description: '',\r\n                notes: '',\r\n                items: [{ item_id: '', quantity_rented: 1 }]\r\n            });\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(\"âŒ Error al crear alquiler\");\r\n        }\r\n    };\r\n\r\n\r\n    // Estado del formulario de devoluciÃ³n\r\n    const [returnForm, setReturnForm] = useState({\r\n        condition: 'bueno',\r\n        notes: '',\r\n        final_payment: 0\r\n    });\r\n\r\n    // Estado del formulario de pago\r\n    const [paymentForm, setPaymentForm] = useState({\r\n        amount: 0,\r\n        payment_method: 'efectivo',\r\n        notes: ''\r\n    });\r\n    // Estados de subida de imagen\r\n    const [imageFile, setImageFile] = useState(null);\r\n    const [imagePreview, setImagePreview] = useState('');\r\n    const [uploadingImage, setUploadingImage] = useState(false);\r\n    // EstadÃ­sticas computadas\r\n    const stats = useMemo(() => {\r\n        // Calcular totales de items\r\n        const totalItems = items.length;\r\n        const totalUnits = items.reduce((sum, item) => {\r\n            return sum + (parseInt(item.quantity_total) || 0);\r\n        }, 0);\r\n        const availableUnits = items.reduce((sum, item) => {\r\n            return sum + (parseInt(item.quantity_available) || 0);\r\n        }, 0);\r\n\r\n        // Calcular unidades alquiladas correctamente\r\n        const rentedUnits = Math.max(0, totalUnits - availableUnits);\r\n\r\n        // Calcular alquileres activos\r\n        const activeRentals = rentals.filter(r => r.status === 'activo');\r\n        const today = new Date();\r\n        const overdueRentals = activeRentals.filter(r => {\r\n            const endDate = new Date(r.rental_end);\r\n            return endDate < today;\r\n        });\r\n\r\n        return {\r\n            totalItems,\r\n            totalUnits,\r\n            availableUnits,\r\n            rentedUnits, // Siempre serÃ¡ >= 0\r\n            activeRentals: activeRentals.length,\r\n            overdueRentals: overdueRentals.length\r\n        };\r\n    }, [items, rentals]);\r\n    // Cargar datos iniciales\r\n    useEffect(() => {\r\n        loadInitialData();\r\n    }, []);\r\n\r\n    // Actualizar badge de pendientes\r\n    useEffect(() => {\r\n        if (updateTabData) {\r\n            updateTabData({\r\n                notification: stats.overdueRentals > 0 ? stats.overdueRentals : null\r\n            });\r\n        }\r\n    }, [stats.overdueRentals]);\r\n\r\n    // Funciones de carga de datos\r\n    const loadInitialData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await Promise.all([\r\n                fetchItems(),\r\n                fetchRentals()\r\n            ]);\r\n        } catch (error) {\r\n            showNotification('Error al cargar datos', 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchItems = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/rental-items/enhanced`);\r\n            setItems(response.data);\r\n        } catch (error) {\r\n            console.error('Error fetching items:', error);\r\n            setError('Error al cargar artÃ­culos');\r\n        }\r\n    };\r\n\r\n    const fetchRentals = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/rentals/enhanced`);\r\n            setRentals(response.data);\r\n        } catch (error) {\r\n            console.error('Error fetching rentals:', error);\r\n            setError('Error al cargar alquileres');\r\n        }\r\n    };\r\n\r\n    const fetchPayments = async (rentalId) => {\r\n        if (!rentalId) {\r\n            console.error('No rental ID provided');\r\n            setPayments([]); // Establecer array vacÃ­o si no hay ID\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.get(`${API_URL}/rentals/${rentalId}/payments`);\r\n            // Asegurar que siempre sea un array\r\n            setPayments(Array.isArray(response.data) ? response.data : []);\r\n        } catch (error) {\r\n            console.error('Error fetching payments:', error);\r\n            setPayments([]); // En caso de error, establecer array vacÃ­o\r\n            showNotification('Error al cargar los abonos', 'error');\r\n        }\r\n    };\r\n\r\n    // Funciones de filtrado y ordenamiento\r\n    const getFilteredItems = useCallback(() => {\r\n        let filtered = [...items];\r\n\r\n        // BÃºsqueda\r\n        if (searchTerm) {\r\n            const search = searchTerm.toLowerCase();\r\n            filtered = filtered.filter(item =>\r\n                item.name?.toLowerCase().includes(search) ||\r\n                item.description?.toLowerCase().includes(search)\r\n            );\r\n        }\r\n\r\n        // Filtro por categorÃ­a\r\n        if (filterCategory !== 'all') {\r\n            filtered = filtered.filter(item => item.category === filterCategory);\r\n        }\r\n\r\n        // Filtro por estado\r\n        if (filterStatus !== 'all') {\r\n            if (filterStatus === 'disponible') {\r\n                filtered = filtered.filter(item => item.quantity_available > 0);\r\n            } else if (filterStatus === 'agotado') {\r\n                filtered = filtered.filter(item => item.quantity_available === 0);\r\n            }\r\n        }\r\n\r\n        // Ordenamiento\r\n        filtered.sort((a, b) => {\r\n            let valueA = a[sortBy];\r\n            let valueB = b[sortBy];\r\n\r\n            if (typeof valueA === 'string') {\r\n                valueA = valueA.toLowerCase();\r\n                valueB = valueB?.toLowerCase() || '';\r\n            }\r\n\r\n            if (sortOrder === 'asc') {\r\n                return valueA > valueB ? 1 : -1;\r\n            } else {\r\n                return valueA < valueB ? 1 : -1;\r\n            }\r\n        });\r\n\r\n        return filtered;\r\n    }, [items, searchTerm, filterCategory, filterStatus, sortBy, sortOrder]);\r\n\r\n    const getActiveRentals = useCallback(() => {\r\n        return rentals.filter(r => r.status === 'activo');\r\n    }, [rentals]);\r\n\r\n    const getPendingReturns = useCallback(() => {\r\n        const today = new Date();\r\n        return rentals.filter(r => {\r\n            if (r.status !== 'activo') return false;\r\n            const endDate = new Date(r.rental_end);\r\n            return endDate <= today;\r\n        });\r\n    }, [rentals]);\r\n\r\n    // CÃ¡lculo de precio de alquiler\r\n    const calculateRentalPrice = useCallback(() => {\r\n        if (!selectedItem || !rentalForm.rental_start || !rentalForm.rental_end) {\r\n            return 0;\r\n        }\r\n\r\n        const start = new Date(rentalForm.rental_start);\r\n        const end = new Date(rentalForm.rental_end);\r\n        const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n        const price = selectedItem.rental_price || selectedItem.daily_rate || 0;\r\n        const quantity = rentalForm.quantity_rented || 1;\r\n\r\n        return price * days * quantity;\r\n    }, [selectedItem, rentalForm.rental_start, rentalForm.rental_end, rentalForm.quantity_rented]);\r\n\r\n    // Actualizar precio automÃ¡ticamente\r\n    useEffect(() => {\r\n        if (selectedItem) {\r\n            const price = calculateRentalPrice();\r\n            setRentalForm(prev => ({ ...prev, total_amount: price }));\r\n        }\r\n    }, [selectedItem, calculateRentalPrice]);\r\n\r\n    // FunciÃ³n para subir la imagen al servidor\r\n    const handleImageUpload = async (file) => {\r\n        if (!file) return;\r\n\r\n        // Validar que sea PNG\r\n        if (!file.type.includes('png')) {\r\n            showNotification('Solo se permiten imÃ¡genes PNG', 'error');\r\n            return;\r\n        }\r\n\r\n        // Validar tamaÃ±o (mÃ¡ximo 2MB)\r\n        if (file.size > 2 * 1024 * 1024) {\r\n            showNotification('La imagen no debe superar 2MB', 'error');\r\n            return;\r\n        }\r\n\r\n        setUploadingImage(true);\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('image', file);\r\n\r\n            const response = await axios.post(\r\n                `${API_URL.replace('/api', '')}/api/upload/image`,\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                }\r\n            );\r\n\r\n            const imageUrl = response.data.url;\r\n            setItemForm({ ...itemForm, image_url: imageUrl });\r\n            setImagePreview(imageUrl);\r\n            showNotification('Imagen subida exitosamente', 'success');\r\n        } catch (error) {\r\n            console.error('Error al subir imagen:', error);\r\n            showNotification('Error al subir la imagen', 'error');\r\n        } finally {\r\n            setUploadingImage(false);\r\n        }\r\n    };\r\n\r\n// FunciÃ³n para eliminar la imagen\r\n    const handleRemoveImage = () => {\r\n        setImageFile(null);\r\n        setImagePreview('');\r\n        setItemForm({ ...itemForm, image_url: '' });\r\n    };\r\n\r\n    // Manejadores de modales\r\n    const openModal = (modalName, data = null) => {\r\n        setModals(prev => ({ ...prev, [modalName]: true }));\r\n\r\n        if (modalName === 'item') {\r\n            if (data) {\r\n                setEditingItem(data);\r\n                setItemForm({\r\n                    name: data.name || '',\r\n                    description: data.description || '',\r\n                    category: data.category || 'herramientas',\r\n                    quantity: data.quantity_total || 1,\r\n                    rental_price: data.daily_rate || 0,\r\n                    image_url: data.image_url || ''\r\n                });\r\n                // Establecer preview si hay imagen existente\r\n                setImagePreview(data.image_url || '');\r\n            } else {\r\n                setEditingItem(null);\r\n                setItemForm({\r\n                    name: '',\r\n                    description: '',\r\n                    category: 'herramientas',\r\n                    quantity: 1,\r\n                    rental_price: 0,\r\n                    image_url: ''\r\n                });\r\n                setImagePreview('');\r\n                setImageFile(null);\r\n            }\r\n\r\n\r\n        } else if (modalName === 'rental' && data) {\r\n            setSelectedItem(data);\r\n            setRentalForm(prev => ({\r\n                ...prev,\r\n                items: [{ item_id: data.id, quantity_rented: 1 }]\r\n            }));\r\n        } else if (modalName === 'return' && data) {\r\n            setSelectedRental(data);\r\n        } else if (modalName === 'payment' && data) {\r\n            setSelectedRental(data);\r\n            fetchPayments(data.id);\r\n        }\r\n    };\r\n\r\n    const closeModal = (modalName) => {\r\n        setModals(prev => ({ ...prev, [modalName]: false }));\r\n\r\n        if (modalName === 'item') {\r\n            setEditingItem(null);\r\n            setItemForm({\r\n                name: '',\r\n                description: '',\r\n                category: 'herramientas',\r\n                quantity: 1,\r\n                rental_price: 0,\r\n                image_url: ''\r\n            });\r\n            setImagePreview('');\r\n            setImageFile(null);\r\n        } else if (modalName === 'rental') {\r\n            setSelectedItem(null);\r\n            setRentalForm({\r\n                item_id: '',\r\n                customer_name: '',\r\n                customer_id_number: '',\r\n                customer_address: '',\r\n                customer_phone: '',\r\n                customer_email: '',\r\n                rental_start: new Date().toISOString().split('T')[0],\r\n                rental_end: '',\r\n                quantity_rented: 1,\r\n                has_collateral: false,\r\n                collateral_description: '',\r\n                total_amount: 0,\r\n                initial_deposit: 0,\r\n                notes: ''\r\n            });\r\n        }\r\n    };\r\n\r\n    // Manejadores de formularios\r\n\r\n    const handleItemSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Preparar los datos con la estructura correcta que espera el backend\r\n            const itemData = {\r\n                name: itemForm.name,\r\n                description: itemForm.description || '',\r\n                category: itemForm.category,\r\n                daily_rate: parseFloat(itemForm.rental_price) || 0,\r\n                weekly_rate: (parseFloat(itemForm.rental_price) || 0) * 6,\r\n                monthly_rate: (parseFloat(itemForm.rental_price) || 0) * 25,\r\n                quantity_total: parseInt(itemForm.quantity) || 1,\r\n                quantity_available: parseInt(itemForm.quantity) || 1,\r\n                status: 'disponible',\r\n                image_url: itemForm.image_url || ''\r\n            };\r\n\r\n            if (editingItem) {\r\n                // Al editar, mantener la cantidad disponible actual\r\n                const currentItem = items.find(item => item.id === editingItem.id);\r\n                if (currentItem) {\r\n                    // Calcular la diferencia para mantener la proporciÃ³n correcta\r\n                    const rentedQuantity = currentItem.quantity_total - currentItem.quantity_available;\r\n                    itemData.quantity_available = Math.max(0, itemData.quantity_total - rentedQuantity);\r\n                }\r\n\r\n                await axios.put(`${API_URL}/rental-items/${editingItem.id}`, itemData);\r\n                showNotification('ArtÃ­culo actualizado exitosamente');\r\n            } else {\r\n                // Crear nuevo artÃ­culo\r\n                await axios.post(`${API_URL}/rental-items`, itemData);\r\n                showNotification('ArtÃ­culo creado exitosamente');\r\n            }\r\n\r\n            await fetchItems();\r\n            closeModal('item');\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            const errorMessage = error.response?.data?.error || 'Error al guardar el artÃ­culo';\r\n            showNotification(errorMessage, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Busca la funciÃ³n handleRentalSubmit en tu Rental.jsx y reemplÃ¡zala con esta versiÃ³n corregida:\r\n\r\n    const handleRentalSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Validar artÃ­culos (que haya al menos 1 y que cada uno tenga item_id y cantidad > 0)\r\n            if (\r\n                !rentalForm.items ||\r\n                rentalForm.items.length === 0 ||\r\n                rentalForm.items.some(it => !it.item_id || it.quantity_rented <= 0)\r\n            ) {\r\n                showNotification('Seleccione al menos un artÃ­culo vÃ¡lido y cantidad mayor a cero', 'error');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Validar datos de cliente y fechas\r\n            if (!rentalForm.customer_name.trim() || !rentalForm.customer_id_number.trim() || !rentalForm.customer_phone.trim()) {\r\n                showNotification('Complete los datos obligatorios del cliente', 'error');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            if (!rentalForm.rental_start || !rentalForm.rental_end) {\r\n                showNotification('Seleccione las fechas de inicio y fin del alquiler', 'error');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            if (new Date(rentalForm.rental_end) <= new Date(rentalForm.rental_start)) {\r\n                showNotification('La fecha de devoluciÃ³n debe ser posterior a la fecha de alquiler', 'error');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Preparar payload para enviar al backend\r\n            const payload = {\r\n                items: rentalForm.items.map(it => ({\r\n                    item_id: Number(it.item_id),\r\n                    quantity_rented: Number(it.quantity_rented)\r\n                })),\r\n                customer_name: rentalForm.customer_name.trim(),\r\n                customer_id_number: rentalForm.customer_id_number.trim(),\r\n                customer_phone: rentalForm.customer_phone.trim(),\r\n                customer_address: rentalForm.customer_address?.trim() || '',\r\n                customer_email: rentalForm.customer_email?.trim() || '',\r\n                rental_start: rentalForm.rental_start,\r\n                rental_end: rentalForm.rental_end,\r\n                deposit: Number(rentalForm.deposit) || 0,\r\n                has_collateral: rentalForm.has_collateral,\r\n                collateral_description: rentalForm.collateral_description || '',\r\n                notes: rentalForm.notes || ''\r\n            };\r\n\r\n            // Enviar a la ruta mÃºltiple\r\n            const response = await axios.post(`${API_URL}/rentals/enhanced`, payload);\r\n\r\n            // Ã‰xito\r\n            showNotification('Alquiler creado exitosamente', 'success');\r\n            await fetchItems();\r\n            await fetchRentals();\r\n\r\n            // Reset del formulario\r\n            setRentalForm({\r\n                customer_name: '',\r\n                customer_id_number: '',\r\n                customer_address: '',\r\n                customer_phone: '',\r\n                customer_email: '',\r\n                rental_start: new Date().toISOString().split('T')[0],\r\n                rental_end: '',\r\n                deposit: 0,\r\n                has_collateral: false,\r\n                collateral_description: '',\r\n                notes: '',\r\n                items: [{ item_id: '', quantity_rented: 1 }]\r\n            });\r\n            closeModal('rental');\r\n\r\n        } catch (error) {\r\n            console.error('Error al crear alquiler:', error);\r\n            const message =\r\n                error.response?.data?.error ||\r\n                error.response?.data?.message ||\r\n                'Error al crear alquiler mÃºltiple';\r\n            showNotification(message, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleReturnSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            await axios.patch(`${API_URL}/rentals/${selectedRental.id}/return`, {\r\n                condition_notes: returnForm.notes,\r\n                return_condition: returnForm.condition\r\n            });\r\n\r\n            // Si hay pago final, registrarlo\r\n            if (returnForm.final_payment > 0) {\r\n                await axios.post(`${API_URL}/rentals/${selectedRental.id}/payments`, {\r\n                    amount: returnForm.final_payment,\r\n                    payment_method: 'efectivo',\r\n                    notes: 'Pago al devolver'\r\n                });\r\n            }\r\n\r\n            showNotification('DevoluciÃ³n registrada exitosamente');\r\n            await Promise.all([fetchItems(), fetchRentals()]);\r\n            closeModal('return');\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            showNotification('Error al registrar devoluciÃ³n', 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePaymentSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!selectedRental || !selectedRental.id) {\r\n            showNotification('Error: No se ha seleccionado un alquiler', 'error');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                `${API_URL}/rentals/${selectedRental.id}/payments`,\r\n                paymentForm\r\n            );\r\n\r\n            showNotification('Abono registrado exitosamente', 'success');\r\n\r\n            // Recargar los pagos\r\n            await fetchPayments(selectedRental.id);\r\n\r\n            // Limpiar el formulario\r\n            setPaymentForm({\r\n                amount: 0,\r\n                payment_method: 'efectivo',\r\n                notes: ''\r\n            });\r\n\r\n            // Actualizar la lista de alquileres\r\n            await fetchRentals();\r\n\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            const errorMessage = error.response?.data?.error || 'Error al registrar abono';\r\n            showNotification(errorMessage, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteItem = async (id) => {\r\n        // Buscar el artÃ­culo para mostrar su nombre en la confirmaciÃ³n\r\n        const item = items.find(i => i.id === id);\r\n        const itemName = item ? item.name : 'este artÃ­culo';\r\n\r\n        if (!window.confirm(`Â¿EstÃ¡ seguro de eliminar \"${itemName}\"?\\n\\nEsta acciÃ³n no se puede deshacer.`)) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const response = await axios.delete(`${API_URL}/rental-items/${id}`);\r\n\r\n            // Mostrar mensaje de Ã©xito con detalles si estÃ¡n disponibles\r\n            if (response.data && response.data.stats) {\r\n                const { payments_deleted, rentals_deleted } = response.data.stats;\r\n                let message = 'ArtÃ­culo eliminado exitosamente';\r\n\r\n                if (rentals_deleted > 0 || payments_deleted > 0) {\r\n                    message += `. Se eliminaron ${rentals_deleted} alquiler(es) histÃ³rico(s) y ${payments_deleted} pago(s) asociado(s).`;\r\n                }\r\n\r\n                showNotification(message, 'success');\r\n            } else {\r\n                showNotification('ArtÃ­culo eliminado exitosamente', 'success');\r\n            }\r\n\r\n            // Recargar la lista de artÃ­culos\r\n            await fetchItems();\r\n\r\n        } catch (error) {\r\n            console.error('Error al eliminar:', error);\r\n\r\n            // Manejar diferentes tipos de errores\r\n            let errorMessage = 'Error al eliminar el artÃ­culo';\r\n\r\n            if (error.response) {\r\n                if (error.response.status === 400) {\r\n                    // Error de validaciÃ³n (artÃ­culo tiene alquileres activos)\r\n                    errorMessage = error.response.data.error || 'No se puede eliminar: El artÃ­culo estÃ¡ en uso';\r\n                } else if (error.response.status === 404) {\r\n                    errorMessage = 'El artÃ­culo no fue encontrado';\r\n                } else if (error.response.status === 500) {\r\n                    // Error del servidor\r\n                    errorMessage = error.response.data.error || 'Error interno del servidor';\r\n\r\n                    // Si hay detalles adicionales en desarrollo\r\n                    if (error.response.data.details) {\r\n                        console.error('Detalles del error:', error.response.data.details);\r\n                    }\r\n                }\r\n            } else if (error.request) {\r\n                errorMessage = 'No se pudo conectar con el servidor';\r\n            }\r\n\r\n            // Mostrar notificaciÃ³n de error\r\n            showNotification(errorMessage, 'error');\r\n\r\n            // Si el error indica que hay alquileres activos, ofrecer mÃ¡s informaciÃ³n\r\n            if (errorMessage.includes('alquiler') && errorMessage.includes('activo')) {\r\n                // Opcionalmente, mostrar una lista de los alquileres activos\r\n                const activeRentalsForItem = rentals.filter(\r\n                    r => r.item_id === id && r.status === 'activo'\r\n                );\r\n\r\n                if (activeRentalsForItem.length > 0) {\r\n                    console.log('Alquileres activos que impiden la eliminaciÃ³n:');\r\n                    activeRentalsForItem.forEach(rental => {\r\n                        console.log(`- Cliente: ${rental.customer_name}, Fecha fin: ${formatDate(rental.rental_end)}`);\r\n                    });\r\n                }\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    const handleDeletePayment = async (paymentId) => {\r\n        if (!window.confirm('Â¿EstÃ¡ seguro de eliminar este abono?')) return;\r\n\r\n        try {\r\n            await axios.delete(`${API_URL}/rental-payments/${paymentId}`);\r\n            showNotification('Abono eliminado');\r\n            await fetchPayments(selectedRental.id);\r\n        } catch (error) {\r\n            showNotification('Error al eliminar abono', 'error');\r\n        }\r\n    };\r\n\r\n    // FunciÃ³n para mostrar notificaciones\r\n    const showNotification = (message, type = 'success') => {\r\n        setNotification({ message, type });\r\n    };\r\n\r\n    // FunciÃ³n para formatear fecha\r\n    const formatDate = (date) => {\r\n        if (!date) return '';\r\n        const options = { day: '2-digit', month: 'short', year: 'numeric' };\r\n        return new Date(date).toLocaleDateString('es-ES', options);\r\n    };\r\n\r\n    // FunciÃ³n para calcular dÃ­as vencidos\r\n    const getDaysOverdue = (endDate) => {\r\n        const today = new Date();\r\n        const end = new Date(endDate);\r\n        const diff = Math.floor((today - end) / (1000 * 60 * 60 * 24));\r\n        return diff > 0 ? diff : 0;\r\n    };\r\n\r\n    // Renderizado del componente\r\n    return (\r\n        <div className=\"rental-container\">\r\n            {/* Notificaciones */}\r\n            {notification && (\r\n                <Notification\r\n                    message={notification.message}\r\n                    type={notification.type}\r\n                    onClose={() => setNotification(null)}\r\n                />\r\n            )}\r\n\r\n            {/* Header Principal */}\r\n            <div className=\"rental-header\">\r\n                <div className=\"header-top\">\r\n                    <h1 className=\"header-title\">GestiÃ³n de Alquileres</h1>\r\n                    <div className=\"header-actions\">\r\n                        <button\r\n                            className=\"btn btn-primary\"\r\n                            onClick={() => openModal('item')}\r\n                        >\r\n                            <Plus size={20} />\r\n                            Nuevo ArtÃ­culo\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn-warning\"\r\n                            onClick={() => {\r\n                                setSelectedItem(null);\r\n                                openModal('rental');\r\n                            }}\r\n                        >\r\n                            <Key size={20} />\r\n                            Nuevo Alquiler\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn-secondary\"\r\n                            onClick={loadInitialData}\r\n                            disabled={loading}\r\n                        >\r\n                            <RefreshCw size={20} className={loading ? 'spinning' : ''} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Controles de bÃºsqueda y filtros */}\r\n                <div className=\"header-controls\">\r\n                    <div className=\"search-box\">\r\n                        <Search size={16} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar artÃ­culos...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                        {searchTerm && (\r\n                            <button\r\n                                className=\"clear-search\"\r\n                                onClick={() => setSearchTerm('')}\r\n                            >\r\n                                <X size={16} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <select\r\n                        className=\"filter-select\"\r\n                        value={filterCategory}\r\n                        onChange={(e) => setFilterCategory(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">Todas las categorÃ­as</option>\r\n                        {Object.entries(CATEGORIES).map(([key, cat]) => (\r\n                            <option key={key} value={key}>\r\n                                {cat.icon} {cat.label}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    <select\r\n                        className=\"filter-select\"\r\n                        value={filterStatus}\r\n                        onChange={(e) => setFilterStatus(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">Todos los estados</option>\r\n                        <option value=\"disponible\">âœ… Disponibles</option>\r\n                        <option value=\"agotado\">âŒ Agotados</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Tabs de navegaciÃ³n */}\r\n                <div className=\"view-tabs\">\r\n                    <button\r\n                        className={`tab-button ${currentView === 'items' ? 'active' : ''}`}\r\n                        onClick={() => setCurrentView('items')}\r\n                    >\r\n                        <Package size={16} />\r\n                        ArtÃ­culos\r\n                    </button>\r\n                    <button\r\n                        className={`tab-button ${currentView === 'rentals' ? 'active' : ''}`}\r\n                        onClick={() => setCurrentView('rentals')}\r\n                    >\r\n                        <Key size={16} />\r\n                        Alquilados\r\n                        {stats.activeRentals > 0 && (\r\n                            <span className=\"badge\">{stats.activeRentals}</span>\r\n                        )}\r\n                    </button>\r\n                    <button\r\n                        className={`tab-button ${currentView === 'pending' ? 'active' : ''}`}\r\n                        onClick={() => setCurrentView('pending')}\r\n                    >\r\n                        <AlertCircle size={16} />\r\n                        Pendientes\r\n                        {stats.overdueRentals > 0 && (\r\n                            <span className=\"badge badge-danger\">{stats.overdueRentals}</span>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* EstadÃ­sticas */}\r\n            <div className=\"stats-grid\">\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-icon yellow\">\r\n                        <Package size={24} />\r\n                    </div>\r\n                    <div className=\"stat-info\">\r\n                        <div className=\"stat-value\">{stats.totalItems}</div>\r\n                        <div className=\"stat-label\">Total ArtÃ­culos</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-icon green\">\r\n                        <CheckCircle size={24} />\r\n                    </div>\r\n                    <div className=\"stat-info\">\r\n                        <div className=\"stat-value\">{stats.availableUnits}</div>\r\n                        <div className=\"stat-label\">Disponibles</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-icon blue\">\r\n                        <Key size={24} />\r\n                    </div>\r\n                    <div className=\"stat-info\">\r\n                        <div className=\"stat-value\">{stats.rentedUnits}</div>\r\n                        <div className=\"stat-label\">Alquilados</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-icon red\">\r\n                        <AlertTriangle size={24} />\r\n                    </div>\r\n                    <div className=\"stat-info\">\r\n                        <div className=\"stat-value\">{stats.overdueRentals}</div>\r\n                        <div className=\"stat-label\">Vencidos</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Contenido Principal */}\r\n            <div className=\"rental-content\">\r\n                {loading && (\r\n                    <div className=\"loading-overlay\">\r\n                        <div className=\"spinner\"></div>\r\n                        <p>Cargando...</p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Vista de ArtÃ­culos */}\r\n                {currentView === 'items' && (\r\n                    <div className=\"items-grid\">\r\n                        {getFilteredItems().length > 0 ? (\r\n                            getFilteredItems().map(item => (\r\n                                <div key={item.id} className=\"item-card\">\r\n                                    <div className=\"item-image\">\r\n                                        {item.image_url ? (\r\n                                            <img src={item.image_url} alt={item.name} />\r\n                                        ) : (\r\n                                            <div className=\"no-image\">\r\n                                                <Package size={48} />\r\n                                            </div>\r\n                                        )}\r\n                                        <div className=\"item-quantity-badge\">\r\n                                            <Hash size={14} />\r\n                                            {item.quantity_available || 0}/{item.quantity_total || 0}\r\n                                        </div>\r\n                                        <div className=\"item-category-badge\">\r\n                                            {CATEGORIES[item.category]?.icon}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"item-content\">\r\n                                        <h3 className=\"item-name\">{item.name}</h3>\r\n                                        <p className=\"item-description\">{item.description}</p>\r\n\r\n                                        <div className=\"item-price\">\r\n                                            <DollarSign size={16} />\r\n                                            ${item.daily_rate || 0}/dÃ­a\r\n                                        </div>\r\n\r\n                                        <div\r\n                                            className=\"item-status\"\r\n                                            style={{\r\n                                                background: item.quantity_available > 0\r\n                                                    ? STATUS_CONFIG.disponible.bgColor\r\n                                                    : STATUS_CONFIG.agotado.bgColor,\r\n                                                color: item.quantity_available > 0\r\n                                                    ? STATUS_CONFIG.disponible.color\r\n                                                    : STATUS_CONFIG.agotado.color\r\n                                            }}\r\n                                        >\r\n                                            {item.quantity_available > 0\r\n                                                ? `${item.quantity_available} disponibles`\r\n                                                : 'Agotado'}\r\n                                        </div>\r\n\r\n                                        <div className=\"item-actions\">\r\n                                            <button\r\n                                                className=\"btn btn-rent\"\r\n                                                onClick={() => openModal('rental', item)}\r\n                                                disabled={item.quantity_available === 0}\r\n                                            >\r\n                                                <Key size={14} />\r\n                                                Alquilar\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-edit\"\r\n                                                onClick={() => openModal('item', item)}\r\n                                            >\r\n                                                <Edit2 size={14} />\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-delete\"\r\n                                                onClick={() => handleDeleteItem(item.id)}\r\n                                            >\r\n                                                <Trash2 size={14} />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"empty-state\">\r\n                                <Package size={64} />\r\n                                <h3>No se encontraron artÃ­culos</h3>\r\n                                <p>Comienza agregando tu primer artÃ­culo</p>\r\n                                <button\r\n                                    className=\"btn btn-primary\"\r\n                                    onClick={() => openModal('item')}\r\n                                >\r\n                                    <Plus size={20} />\r\n                                    Agregar ArtÃ­culo\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Vista de Alquilados */}\r\n                {currentView === 'rentals' && (\r\n                    <div className=\"rentals-list\">\r\n                        {getActiveRentals().length > 0 ? (\r\n                            getActiveRentals().map(rental => (\r\n                                <div key={rental.id} className=\"rental-card\">\r\n                                    <div className=\"rental-header\">\r\n                                        <div className=\"rental-customer\">\r\n                                            <User size={20} />\r\n                                            <div>\r\n                                                <h4>{rental.customer_name}</h4>\r\n                                                <span className=\"customer-details\">\r\n                                                    {rental.customer_id_number} â€¢ {rental.customer_phone}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                        {rental.has_collateral && (\r\n                                            <div className=\"collateral-badge\">\r\n                                                <Shield size={14} />\r\n                                                Con Prenda\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"rental-item-info\">\r\n                                        <Package size={16} />\r\n                                        <span>{rental.item_name}</span>\r\n                                        <span className=\"quantity\">x{rental.quantity_rented}</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"rental-dates\">\r\n                                        <div className=\"date-item\">\r\n                                            <Calendar size={14} />\r\n                                            <div>\r\n                                                <span className=\"date-label\">Inicio</span>\r\n                                                <span className=\"date-value\">{formatDate(rental.rental_start)}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ArrowRight size={16} />\r\n                                        <div className=\"date-item\">\r\n                                            <Calendar size={14} />\r\n                                            <div>\r\n                                                <span className=\"date-label\">DevoluciÃ³n</span>\r\n                                                <span className=\"date-value\">{formatDate(rental.rental_end)}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"rental-payment-info\">\r\n                                        <div className=\"payment-stat\">\r\n                                            <span className=\"payment-label\">Total</span>\r\n                                            <span className=\"payment-value\">${rental.total_amount}</span>\r\n                                        </div>\r\n                                        <div className=\"payment-stat\">\r\n                                            <span className=\"payment-label\">Abonado</span>\r\n                                            <span className=\"payment-value text-green\">\r\n                                                ${rental.total_paid || 0}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"payment-stat\">\r\n                                            <span className=\"payment-label\">Saldo</span>\r\n                                            <span className=\"payment-value text-orange\">\r\n                                                ${(rental.total_amount - (rental.total_paid || 0)).toFixed(2)}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"rental-actions\">\r\n                                        <button\r\n                                            className=\"btn btn-success\"\r\n                                            onClick={() => openModal('return', rental)}\r\n                                        >\r\n                                            <RotateCcw size={14} />\r\n                                            Devolver\r\n                                        </button>\r\n                                        <button\r\n                                            className=\"btn btn-warning\"\r\n                                            onClick={() => openModal('payment', rental)}\r\n                                        >\r\n                                            <DollarSign size={14} />\r\n                                            Abonos\r\n                                        </button>\r\n                                        <button\r\n                                            className=\"btn btn-secondary\"\r\n                                            onClick={() => {\r\n                                                setSelectedRental(rental);\r\n                                                openModal('details');\r\n                                            }}\r\n                                        >\r\n                                            <Eye size={14} />\r\n                                            Detalles\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"empty-state\">\r\n                                <Key size={64} />\r\n                                <h3>No hay artÃ­culos alquilados</h3>\r\n                                <p>Los alquileres activos aparecerÃ¡n aquÃ­</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Vista de Pendientes */}\r\n                {currentView === 'pending' && (\r\n                    <div className=\"rentals-list\">\r\n                        {getPendingReturns().length > 0 ? (\r\n                            getPendingReturns().map(rental => {\r\n                                const daysOverdue = getDaysOverdue(rental.rental_end);\r\n\r\n                                return (\r\n                                    <div key={rental.id} className=\"rental-card overdue\">\r\n                                        <div className=\"overdue-indicator\">\r\n                                            <AlertTriangle size={16} />\r\n                                            {daysOverdue} dÃ­as vencido\r\n                                        </div>\r\n\r\n                                        <div className=\"rental-header\">\r\n                                            <div className=\"rental-customer\">\r\n                                                <User size={20} />\r\n                                                <div>\r\n                                                    <h4>{rental.customer_name}</h4>\r\n                                                    <span className=\"customer-details\">\r\n                                                        ðŸ“± {rental.customer_phone}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"rental-item-info\">\r\n                                            <Package size={16} />\r\n                                            <span>{rental.item_name}</span>\r\n                                        </div>\r\n\r\n                                        <div className=\"overdue-info\">\r\n                                            <div className=\"info-item\">\r\n                                                <span className=\"info-label\">DebiÃ³ devolver:</span>\r\n                                                <span className=\"info-value\">{formatDate(rental.rental_end)}</span>\r\n                                            </div>\r\n                                            <div className=\"info-item\">\r\n                                                <span className=\"info-label\">Saldo pendiente:</span>\r\n                                                <span className=\"info-value text-orange\">\r\n                                                    ${(rental.total_amount - (rental.total_paid || 0)).toFixed(2)}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"rental-actions\">\r\n                                            <button\r\n                                                className=\"btn btn-success\"\r\n                                                onClick={() => openModal('return', rental)}\r\n                                            >\r\n                                                <RotateCcw size={14} />\r\n                                                Registrar DevoluciÃ³n\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-primary\"\r\n                                                onClick={() => window.location.href = `tel:${rental.customer_phone}`}\r\n                                            >\r\n                                                <Phone size={14} />\r\n                                                Contactar\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        ) : (\r\n                            <div className=\"empty-state\">\r\n                                <CheckCircle size={64} color=\"#10b981\" />\r\n                                <h3>No hay devoluciones pendientes</h3>\r\n                                <p>Â¡Todos los alquileres estÃ¡n al dÃ­a!</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Modal de ArtÃ­culo */}\r\n            {modals.item && (\r\n                <div className=\"modal-overlay\" onClick={() => closeModal('item')}>\r\n                    <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>{editingItem ? 'Editar ArtÃ­culo' : 'Nuevo ArtÃ­culo'}</h2>\r\n                            <button className=\"close-btn\" onClick={() => closeModal('item')}>\r\n                                <X size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleItemSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <label>Nombre del artÃ­culo *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    value={itemForm.name}\r\n                                    onChange={(e) => setItemForm({...itemForm, name: e.target.value})}\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-row\">\r\n                                <div className=\"form-group\">\r\n                                    <label>CategorÃ­a</label>\r\n                                    <select\r\n                                        className=\"form-control\"\r\n                                        value={itemForm.category}\r\n                                        onChange={(e) => setItemForm({...itemForm, category: e.target.value})}\r\n                                    >\r\n                                        {Object.entries(CATEGORIES).map(([key, cat]) => (\r\n                                            <option key={key} value={key}>\r\n                                                {cat.icon} {cat.label}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>Cantidad</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        className=\"form-control\"\r\n                                        value={itemForm.quantity}\r\n                                        onChange={(e) => setItemForm({...itemForm, quantity: parseInt(e.target.value)})}\r\n                                        min=\"1\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Precio de alquiler (por dÃ­a)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"form-control\"\r\n                                    value={itemForm.rental_price}\r\n                                    onChange={(e) => setItemForm({...itemForm, rental_price: parseFloat(e.target.value)})}\r\n                                    step=\"0.01\"\r\n                                    min=\"0\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>DescripciÃ³n</label>\r\n                                <textarea\r\n                                    className=\"form-control\"\r\n                                    value={itemForm.description}\r\n                                    onChange={(e) => setItemForm({...itemForm, description: e.target.value})}\r\n                                    rows=\"3\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Imagen del artÃ­culo (PNG)</label>\r\n\r\n                                {/* Preview de la imagen */}\r\n                                {(imagePreview || itemForm.image_url) && (\r\n                                    <div className=\"image-preview-container\">\r\n                                        <img\r\n                                            src={imagePreview || itemForm.image_url}\r\n                                            alt=\"Preview\"\r\n                                            className=\"image-preview\"\r\n                                        />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            className=\"remove-image-btn\"\r\n                                            onClick={handleRemoveImage}\r\n                                            title=\"Eliminar imagen\"\r\n                                        >\r\n                                            <X size={20} />\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Input de archivo oculto */}\r\n                                <input\r\n                                    type=\"file\"\r\n                                    id=\"image-upload\"\r\n                                    accept=\"image/png\"\r\n                                    onChange={(e) => {\r\n                                        const file = e.target.files[0];\r\n                                        if (file) {\r\n                                            setImageFile(file);\r\n                                            handleImageUpload(file);\r\n                                        }\r\n                                    }}\r\n                                    style={{ display: 'none' }}\r\n                                />\r\n\r\n                                {/* BotÃ³n personalizado para subir imagen */}\r\n                                <label\r\n                                    htmlFor=\"image-upload\"\r\n                                    className={`upload-image-btn ${uploadingImage ? 'uploading' : ''}`}\r\n                                >\r\n                                    {uploadingImage ? (\r\n                                        <>\r\n                                            <div className=\"spinner-small\"></div>\r\n                                            <span>Subiendo...</span>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Camera size={20} />\r\n                                            <span>\r\n                    {imagePreview || itemForm.image_url\r\n                        ? 'Cambiar imagen'\r\n                        : 'Subir imagen PNG'}\r\n                </span>\r\n                                        </>\r\n                                    )}\r\n                                </label>\r\n\r\n                                <small className=\"form-help\">\r\n                                    Solo archivos PNG. TamaÃ±o mÃ¡ximo: 2MB\r\n                                </small>\r\n                            </div>\r\n\r\n                            <div className=\"form-actions\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-secondary\"\r\n                                    onClick={() => closeModal('item')}\r\n                                >\r\n                                    Cancelar\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'Guardando...' : 'Guardar'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de Alquiler */}\r\n            {/* Modal Nuevo Alquiler */}\r\n            {modals.rental && (\r\n                <div className=\"modal-overlay\" onClick={(e) => {\r\n                    if (e.target.className === 'modal-overlay') closeModal('rental');\r\n                }}>\r\n                    <div className=\"modal-content rental-modal\">\r\n                        <div className=\"modal-header\">\r\n                            <h2>Nuevo Alquiler</h2>\r\n                            <button\r\n                                className=\"close-btn\"\r\n                                onClick={() => closeModal('rental')}\r\n                                type=\"button\"\r\n                            >\r\n                                <X size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleRentalSubmit} className=\"rental-form\">\r\n                            {/* Datos del Cliente */}\r\n                            <div className=\"form-section\">\r\n                                <h3>Datos del Cliente</h3>\r\n                                <div className=\"form-row\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>Nombre Completo *</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={rentalForm.customer_name}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                customer_name: e.target.value\r\n                                            })}\r\n                                            required\r\n                                            placeholder=\"Ej: Juan PÃ©rez\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label>CÃ©dula/RUC *</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={rentalForm.customer_id_number}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                customer_id_number: e.target.value\r\n                                            })}\r\n                                            required\r\n                                            placeholder=\"Ej: 0912345678\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"form-row\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>TelÃ©fono *</label>\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            value={rentalForm.customer_phone}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                customer_phone: e.target.value\r\n                                            })}\r\n                                            required\r\n                                            placeholder=\"Ej: 0991234567\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Email</label>\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            value={rentalForm.customer_email}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                customer_email: e.target.value\r\n                                            })}\r\n                                            placeholder=\"correo@ejemplo.com\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>DirecciÃ³n</label>\r\n                                    <textarea\r\n                                        value={rentalForm.customer_address}\r\n                                        onChange={(e) => setRentalForm({\r\n                                            ...rentalForm,\r\n                                            customer_address: e.target.value\r\n                                        })}\r\n                                        rows=\"2\"\r\n                                        placeholder=\"DirecciÃ³n completa del cliente\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* ArtÃ­culos a Alquilar */}\r\n                            <div className=\"form-section\">\r\n                                <h3>ArtÃ­culos a Alquilar</h3>\r\n\r\n                                {rentalForm.items.map((item, index) => (\r\n                                    <div key={index} className=\"item-row\">\r\n                                        <div className=\"form-group flex-grow\">\r\n                                            <label>ArtÃ­culo *</label>\r\n                                            <select\r\n                                                value={item.item_id}\r\n                                                onChange={(e) => {\r\n                                                    const newItems = [...rentalForm.items];\r\n                                                    newItems[index].item_id = e.target.value;\r\n                                                    setRentalForm({...rentalForm, items: newItems});\r\n                                                }}\r\n                                                required\r\n                                            >\r\n                                                <option value=\"\">Seleccionar artÃ­culo...</option>\r\n                                                {items\r\n                                                    .filter(i => i.quantity_available > 0)\r\n                                                    .map(i => (\r\n                                                        <option key={i.id} value={i.id}>\r\n                                                            {i.name} - Disponible: {i.quantity_available}\r\n                                                        </option>\r\n                                                    ))\r\n                                                }\r\n                                            </select>\r\n                                        </div>\r\n\r\n                                        <div className=\"form-group\" style={{width: '120px'}}>\r\n                                            <label>Cantidad *</label>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                min=\"1\"\r\n                                                max={\r\n                                                    item.item_id\r\n                                                        ? items.find(i => i.id === parseInt(item.item_id))?.quantity_available || 1\r\n                                                        : 999\r\n                                                }\r\n                                                value={item.quantity_rented}\r\n                                                onChange={(e) => {\r\n                                                    const newItems = [...rentalForm.items];\r\n                                                    newItems[index].quantity_rented = parseInt(e.target.value) || 1;\r\n                                                    setRentalForm({...rentalForm, items: newItems});\r\n                                                }}\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n\r\n                                        {rentalForm.items.length > 1 && (\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                className=\"remove-item-btn\"\r\n                                                onClick={() => {\r\n                                                    const newItems = rentalForm.items.filter((_, i) => i !== index);\r\n                                                    setRentalForm({...rentalForm, items: newItems});\r\n                                                }}\r\n                                            >\r\n                                                <Trash2 size={20} />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"add-item-btn\"\r\n                                    onClick={() => {\r\n                                        setRentalForm({\r\n                                            ...rentalForm,\r\n                                            items: [...rentalForm.items, { item_id: '', quantity_rented: 1 }]\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    <Plus size={20} /> Agregar otro artÃ­culo\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Fechas y DepÃ³sito */}\r\n                            <div className=\"form-section\">\r\n                                <h3>Detalles del Alquiler</h3>\r\n                                <div className=\"form-row\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>Fecha Inicio *</label>\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            value={rentalForm.rental_start}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                rental_start: e.target.value\r\n                                            })}\r\n                                            required\r\n                                            min={new Date().toISOString().split('T')[0]}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Fecha DevoluciÃ³n *</label>\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            value={rentalForm.rental_end}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                rental_end: e.target.value\r\n                                            })}\r\n                                            required\r\n                                            min={rentalForm.rental_start || new Date().toISOString().split('T')[0]}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"form-row\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>DepÃ³sito ($)</label>\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            step=\"0.01\"\r\n                                            min=\"0\"\r\n                                            value={rentalForm.deposit}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                deposit: parseFloat(e.target.value) || 0\r\n                                            })}\r\n                                            placeholder=\"0.00\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label className=\"checkbox-label\">\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                checked={rentalForm.has_collateral}\r\n                                                onChange={(e) => setRentalForm({\r\n                                                    ...rentalForm,\r\n                                                    has_collateral: e.target.checked,\r\n                                                    collateral_description: e.target.checked ? rentalForm.collateral_description : ''\r\n                                                })}\r\n                                            />\r\n                                            <span>Tiene GarantÃ­a</span>\r\n                                        </label>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {rentalForm.has_collateral && (\r\n                                    <div className=\"form-group\">\r\n                                        <label>DescripciÃ³n de la GarantÃ­a</label>\r\n                                        <textarea\r\n                                            value={rentalForm.collateral_description}\r\n                                            onChange={(e) => setRentalForm({\r\n                                                ...rentalForm,\r\n                                                collateral_description: e.target.value\r\n                                            })}\r\n                                            rows=\"2\"\r\n                                            placeholder=\"Describa la garantÃ­a dejada por el cliente\"\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>Notas Adicionales</label>\r\n                                    <textarea\r\n                                        value={rentalForm.notes}\r\n                                        onChange={(e) => setRentalForm({\r\n                                            ...rentalForm,\r\n                                            notes: e.target.value\r\n                                        })}\r\n                                        rows=\"3\"\r\n                                        placeholder=\"Observaciones o condiciones especiales\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Botones de AcciÃ³n */}\r\n                            <div className=\"modal-footer\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn-secondary\"\r\n                                    onClick={() => closeModal('rental')}\r\n                                    disabled={loading}\r\n                                >\r\n                                    Cancelar\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn-primary\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'Creando...' : 'Crear Alquiler'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* Modal de DevoluciÃ³n */}\r\n            {modals.return && selectedRental && (\r\n                <div className=\"modal-overlay\" onClick={() => closeModal('return')}>\r\n                    <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>Registrar DevoluciÃ³n</h2>\r\n                            <button className=\"close-btn\" onClick={() => closeModal('return')}>\r\n                                <X size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleReturnSubmit}>\r\n                            <div className=\"rental-summary\">\r\n                                <h3>{selectedRental.item_name}</h3>\r\n                                <p>Cliente: {selectedRental.customer_name}</p>\r\n                                <p>PerÃ­odo: {formatDate(selectedRental.rental_start)} - {formatDate(selectedRental.rental_end)}</p>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Estado del artÃ­culo</label>\r\n                                <select\r\n                                    className=\"form-control\"\r\n                                    value={returnForm.condition}\r\n                                    onChange={(e) => setReturnForm({...returnForm, condition: e.target.value})}\r\n                                >\r\n                                    <option value=\"bueno\">Bueno</option>\r\n                                    <option value=\"regular\">Regular</option>\r\n                                    <option value=\"daÃ±ado\">DaÃ±ado</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Notas sobre el estado</label>\r\n                                <textarea\r\n                                    className=\"form-control\"\r\n                                    value={returnForm.notes}\r\n                                    onChange={(e) => setReturnForm({...returnForm, notes: e.target.value})}\r\n                                    rows=\"3\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"payment-summary\">\r\n                                <div className=\"summary-item\">\r\n                                    <span>Total del alquiler:</span>\r\n                                    <span className=\"amount\">${selectedRental.total_amount}</span>\r\n                                </div>\r\n                                <div className=\"summary-item\">\r\n                                    <span>Abonado:</span>\r\n                                    <span className=\"amount text-green\">${selectedRental.total_paid || 0}</span>\r\n                                </div>\r\n                                <div className=\"summary-item total\">\r\n                                    <span>Saldo pendiente:</span>\r\n                                    <span className=\"amount text-orange\">\r\n                                        ${(selectedRental.total_amount - (selectedRental.total_paid || 0)).toFixed(2)}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {(selectedRental.total_amount - (selectedRental.total_paid || 0)) > 0 && (\r\n                                <div className=\"form-group\">\r\n                                    <label>Pago final</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        className=\"form-control\"\r\n                                        value={returnForm.final_payment}\r\n                                        onChange={(e) => setReturnForm({...returnForm, final_payment: parseFloat(e.target.value)})}\r\n                                        step=\"0.01\"\r\n                                        min=\"0\"\r\n                                        max={selectedRental.total_amount - (selectedRental.total_paid || 0)}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"form-actions\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-secondary\"\r\n                                    onClick={() => closeModal('return')}\r\n                                >\r\n                                    Cancelar\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? 'Procesando...' : 'Confirmar DevoluciÃ³n'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de Pagos */}\r\n            {modals.payment && selectedRental && (\r\n                <div className=\"modal-overlay\" onClick={() => closeModal('payment')}>\r\n                    <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>GestiÃ³n de Abonos</h2>\r\n                            <button className=\"close-btn\" onClick={() => closeModal('payment')}>\r\n                                <X size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"rental-info\">\r\n                            <h3>{selectedRental.item_name}</h3>\r\n                            <p>Cliente: {selectedRental.customer_name}</p>\r\n                            <p>Total del alquiler: ${selectedRental.total_amount || 0}</p>\r\n                        </div>\r\n\r\n                        {/* Lista de abonos existentes - CON VALIDACIÃ“N */}\r\n                        <div className=\"payments-list\">\r\n                            <h4>Abonos realizados</h4>\r\n                            {Array.isArray(payments) && payments.length > 0 ? (\r\n                                <table className=\"payments-table\">\r\n                                    <thead>\r\n                                    <tr>\r\n                                        <th>Fecha</th>\r\n                                        <th>Monto</th>\r\n                                        <th>MÃ©todo</th>\r\n                                        <th>Notas</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    {payments.map(payment => (\r\n                                        <tr key={payment.id}>\r\n                                            <td>{formatDate(payment.payment_date)}</td>\r\n                                            <td>${payment.amount}</td>\r\n                                            <td>{payment.payment_method}</td>\r\n                                            <td>{payment.notes || '-'}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            ) : (\r\n                                <p className=\"text-muted\">No hay abonos registrados</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Resumen de pagos - CON VALIDACIÃ“N */}\r\n                        <div className=\"payment-summary\">\r\n                            <div className=\"summary-item\">\r\n                                <span>Total del alquiler:</span>\r\n                                <span className=\"amount\">${selectedRental.total_amount || 0}</span>\r\n                            </div>\r\n                            <div className=\"summary-item\">\r\n                                <span>Total abonado:</span>\r\n                                <span className=\"amount\">\r\n                        ${Array.isArray(payments)\r\n                                    ? payments.reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0).toFixed(2)\r\n                                    : '0.00'\r\n                                }\r\n                    </span>\r\n                            </div>\r\n                            <div className=\"summary-item total\">\r\n                                <span>Saldo pendiente:</span>\r\n                                <span className=\"amount\">\r\n                        ${(\r\n                                    (parseFloat(selectedRental.total_amount) || 0) -\r\n                                    (Array.isArray(payments)\r\n                                        ? payments.reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0)\r\n                                        : 0)\r\n                                ).toFixed(2)}\r\n                    </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Formulario para nuevo abono */}\r\n                        <form onSubmit={handlePaymentSubmit} className=\"payment-form\">\r\n                            <h4>Registrar nuevo abono</h4>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Monto del abono</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"form-control\"\r\n                                    value={paymentForm.amount}\r\n                                    onChange={(e) => setPaymentForm({\r\n                                        ...paymentForm,\r\n                                        amount: parseFloat(e.target.value) || 0\r\n                                    })}\r\n                                    step=\"0.01\"\r\n                                    min=\"0.01\"\r\n                                    max={(parseFloat(selectedRental.total_amount) || 0) -\r\n                                        (Array.isArray(payments)\r\n                                            ? payments.reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0)\r\n                                            : 0)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>MÃ©todo de pago</label>\r\n                                <select\r\n                                    className=\"form-control\"\r\n                                    value={paymentForm.payment_method}\r\n                                    onChange={(e) => setPaymentForm({\r\n                                        ...paymentForm,\r\n                                        payment_method: e.target.value\r\n                                    })}\r\n                                >\r\n                                    <option value=\"efectivo\">Efectivo</option>\r\n                                    <option value=\"transferencia\">Transferencia</option>\r\n                                    <option value=\"tarjeta\">Tarjeta</option>\r\n                                    <option value=\"otro\">Otro</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Notas (opcional)</label>\r\n                                <textarea\r\n                                    className=\"form-control\"\r\n                                    value={paymentForm.notes}\r\n                                    onChange={(e) => setPaymentForm({\r\n                                        ...paymentForm,\r\n                                        notes: e.target.value\r\n                                    })}\r\n                                    rows=\"2\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-actions\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-secondary\"\r\n                                    onClick={() => closeModal('payment')}\r\n                                >\r\n                                    Cancelar\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    disabled={loading || !paymentForm.amount}\r\n                                >\r\n                                    {loading ? 'Registrando...' : 'Registrar Abono'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Rental;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}