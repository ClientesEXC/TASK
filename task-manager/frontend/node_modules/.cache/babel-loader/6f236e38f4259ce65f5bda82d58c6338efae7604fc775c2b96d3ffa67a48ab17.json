{"ast":null,"code":"import api from'../config/api';// Adaptadores entre API <-> UI\nexport const toUIProduct=p=>({id:p.id,name:p.name,description:p.description||'',price:Number(p.price),stock:Number(p.stock_total),availableStock:Number(p.stock_available),image:p.image_url||null,is_active:!!p.is_active,version:Number(p.version),created_at:p.created_at,updated_at:p.updated_at});const BASE='/v1/products';// OJO: api.js ya tiene /api\nexport async function listProducts(){let{q='',page=1,per_page=12,sort='created_at',dir='desc',is_active=true,min_stock,include_deleted=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{data}=await api.get(\"\".concat(BASE),{params:{q,page,per_page,sort,dir,is_active,min_stock,include_deleted}});return{items:data.data.map(toUIProduct),meta:data.meta};}export async function getProduct(id){const res=await api.get(\"\".concat(BASE,\"/\").concat(id));const etag=res.headers.etag;// \"v{version}\"\nreturn{item:toUIProduct(res.data.data),etag};}export async function createProduct(form){const body={name:form.name,description:form.description||null,price:Number(form.price),stock_total:Number(form.stock),image_url:form.image||null,is_active:true};const{data}=await api.post(\"\".concat(BASE),body);return toUIProduct(data.data);}export async function updateProduct(id,form,expectedVersion){const body={name:form.name,description:form.description||null,price:form.price!==''?Number(form.price):undefined,stock_total:form.stock!==''?Number(form.stock):undefined,image_url:form.image||null,expected_version:expectedVersion// optimistic locking\n};const res=await api.patch(\"\".concat(BASE,\"/\").concat(id),body);const updated=toUIProduct(res.data.data);const etag=res.headers.etag;// \"v{version}\"\nreturn{updated,etag};}export async function deleteProduct(id){const{data}=await api.delete(\"\".concat(BASE,\"/\").concat(id));// soft delete\nreturn toUIProduct(data.data);}export async function restoreProduct(id){const{data}=await api.post(\"\".concat(BASE,\"/\").concat(id,\"/restore\"));return toUIProduct(data.data);}","map":{"version":3,"names":["api","toUIProduct","p","id","name","description","price","Number","stock","stock_total","availableStock","stock_available","image","image_url","is_active","version","created_at","updated_at","BASE","listProducts","q","page","per_page","sort","dir","min_stock","include_deleted","arguments","length","undefined","data","get","concat","params","items","map","meta","getProduct","res","etag","headers","item","createProduct","form","body","post","updateProduct","expectedVersion","expected_version","patch","updated","deleteProduct","delete","restoreProduct"],"sources":["C:/Users/Silvia/WebstormProjects/TASK/task-manager/frontend/src/services/products.js"],"sourcesContent":["import api from '../config/api';\r\n\r\n// Adaptadores entre API <-> UI\r\nexport const toUIProduct = (p) => ({\r\n    id: p.id,\r\n    name: p.name,\r\n    description: p.description || '',\r\n    price: Number(p.price),\r\n    stock: Number(p.stock_total),\r\n    availableStock: Number(p.stock_available),\r\n    image: p.image_url || null,\r\n    is_active: !!p.is_active,\r\n    version: Number(p.version),\r\n    created_at: p.created_at,\r\n    updated_at: p.updated_at,\r\n});\r\n\r\nconst BASE = '/v1/products'; // OJO: api.js ya tiene /api\r\n\r\nexport async function listProducts({\r\n                                       q = '',\r\n                                       page = 1,\r\n                                       per_page = 12,\r\n                                       sort = 'created_at',\r\n                                       dir = 'desc',\r\n                                       is_active = true,\r\n                                       min_stock,\r\n                                       include_deleted = false,\r\n                                   } = {}) {\r\n    const { data } = await api.get(`${BASE}`, {\r\n        params: { q, page, per_page, sort, dir, is_active, min_stock, include_deleted },\r\n    });\r\n    return {\r\n        items: data.data.map(toUIProduct),\r\n        meta: data.meta,\r\n    };\r\n}\r\n\r\nexport async function getProduct(id) {\r\n    const res = await api.get(`${BASE}/${id}`);\r\n    const etag = res.headers.etag; // \"v{version}\"\r\n    return { item: toUIProduct(res.data.data), etag };\r\n}\r\n\r\nexport async function createProduct(form) {\r\n    const body = {\r\n        name: form.name,\r\n        description: form.description || null,\r\n        price: Number(form.price),\r\n        stock_total: Number(form.stock),\r\n        image_url: form.image || null,\r\n        is_active: true,\r\n    };\r\n    const { data } = await api.post(`${BASE}`, body);\r\n    return toUIProduct(data.data);\r\n}\r\n\r\nexport async function updateProduct(id, form, expectedVersion) {\r\n    const body = {\r\n        name: form.name,\r\n        description: form.description || null,\r\n        price: form.price !== '' ? Number(form.price) : undefined,\r\n        stock_total: form.stock !== '' ? Number(form.stock) : undefined,\r\n        image_url: form.image || null,\r\n        expected_version: expectedVersion, // optimistic locking\r\n    };\r\n    const res = await api.patch(`${BASE}/${id}`, body);\r\n    const updated = toUIProduct(res.data.data);\r\n    const etag = res.headers.etag; // \"v{version}\"\r\n    return { updated, etag };\r\n}\r\n\r\nexport async function deleteProduct(id) {\r\n    const { data } = await api.delete(`${BASE}/${id}`); // soft delete\r\n    return toUIProduct(data.data);\r\n}\r\n\r\nexport async function restoreProduct(id) {\r\n    const { data } = await api.post(`${BASE}/${id}/restore`);\r\n    return toUIProduct(data.data);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}